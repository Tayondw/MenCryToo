import{j as e}from"./index-CXIZax8x.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{e as t,L as r}from"./router-vendor-DFbjbkyO.js";import{a}from"./redux-vendor-s9F9CGgp.js";import{A as i,w as o,v as l,U as n,e as d,a1 as c,t as m}from"./ui-vendor-DzNpKoho.js";const x=()=>{var x;const g=t(),p=a(e=>e.session.user),[u,h]=s.useState(""),f=s.useMemo(()=>g&&g.users_profile?g:{users_profile:[]},[g]),{posts:j}=s.useMemo(()=>{if(!p)return{posts:[]};const e=[];f.users_profile&&f.users_profile.forEach(s=>{s.posts&&Array.isArray(s.posts)&&e.push(...s.posts)});let s=e;if(u){const t=u.toLowerCase();s=e.filter(e=>{var s,r,a,i;return(null==(s=e.title)?void 0:s.toLowerCase().includes(t))||(null==(r=e.caption)?void 0:r.toLowerCase().includes(t))||(null==(i=null==(a=e.user)?void 0:a.username)?void 0:i.toLowerCase().includes(t))})}return{posts:s.sort((e,s)=>new Date(s.updatedAt||0).getTime()-new Date(e.updatedAt||0).getTime())}},[f,p,u]),v=s.useCallback(e=>{if(!e)return"Unknown";const s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/864e5);return`${Math.max(1,r)}d ago`},[]);return p?(null==g?void 0:g.error)?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-red-200 max-w-md mx-auto text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-red-800 mb-2",children:"Error Loading Posts"}),e.jsx("p",{className:"text-red-600 mb-4",children:g.error}),e.jsxs(r,{to:"/profile",className:"inline-flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(i,{size:18}),"Back to Profile"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(r,{to:"/profile",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(i,{size:20}),"Profile"]}),e.jsxs(r,{to:"/posts/create",className:"inline-flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(o,{size:18}),"Create Post"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-gradient-to-r from-orange-600 to-slate-800 bg-clip-text text-transparent mb-4",children:"Discover Similar Minds"}),e.jsx("p",{className:"text-lg text-slate-600 max-w-2xl mx-auto",children:"Connect with posts from users who share your interests and passions."})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx(l,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search posts, users, or content...",value:u,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsxs("p",{className:"text-sm text-slate-600",children:["Showing ",e.jsx("span",{className:"font-semibold",children:j.length})," ","posts from users with similar interests"]})})]}),0===j.length?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(n,{size:32,className:"text-slate-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:(null==g?void 0:g.message)||"No Posts Found"}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-md mx-auto",children:(null==(x=null==g?void 0:g.message)?void 0:x.includes("Add tags"))?"Add some tags to your profile to discover users with similar interests!":"Users with similar interests haven't posted anything yet, or no posts match your search."}),e.jsxs(r,{to:`/users/${p.id}/profile/update`,className:"inline-flex items-center gap-2 bg-orange-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(n,{size:20}),"Update Profile"]})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center space-y-8",children:[j.map(s=>{var t,a,i,o;return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 max-w-4xl w-full",children:[e.jsx("div",{className:"p-4 border-b border-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(r,{to:`/users/${s.creator}`,className:"flex items-center gap-3 hover:bg-gray-50 rounded-lg p-2 -m-2 transition-colors duration-200 no-underline",children:[e.jsx("img",{src:null==(t=s.user)?void 0:t.profileImage,alt:null==(a=s.user)?void 0:a.username,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100",loading:"lazy"}),e.jsx("p",{className:"font-semibold text-gray-800",children:null==(i=s.user)?void 0:i.username})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:s.title})})]})}),s.image&&e.jsx("div",{className:"relative",children:e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-96 object-cover",loading:"lazy"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 hover:text-red-500 transition-colors duration-200 cursor-pointer",children:[e.jsx(d,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:s.likes||0})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 hover:text-blue-500 transition-colors duration-200 cursor-pointer",children:[e.jsx(c,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:s.comments||0})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 leading-relaxed",children:[e.jsx(r,{to:`/users/${s.creator}`,className:"font-semibold text-gray-800 hover:text-gray-600 transition-colors",children:null==(o=s.user)?void 0:o.username}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsxs("span",{className:"text-gray-500 flex-shrink-0 flex items-center gap-1",children:[e.jsx(m,{size:12}),v(s.updatedAt)]}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("p",{className:"text-gray-700 flex-1",children:s.caption})]})]})]},s.id)}),g.pagination&&g.pagination.pages>1&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsxs("p",{className:"text-slate-600",children:["Page ",g.pagination.page," of"," ",g.pagination.pages," (",g.pagination.total," ","total posts)"]}),e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[g.pagination.has_prev&&e.jsx(r,{to:"?page="+(g.pagination.page-1),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Previous"}),g.pagination.has_next&&e.jsx(r,{to:`?page=${g.pagination.page+1}`,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"Next"})]})]})]})]})]}):(window.location.href="/",null)};export{x as default};
