import{j as e}from"./index-CXIZax8x.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{e as t,u as a,L as l,F as r}from"./router-vendor-DFbjbkyO.js";import{a as i}from"./redux-vendor-s9F9CGgp.js";import{c as n,A as d,k as o,s as c,C as m,D as x,w as h,I as p,J as g,K as u,U as j,N as b,t as v,O as N,Q as f,R as w}from"./ui-vendor-DzNpKoho.js";const y=()=>{var y,z,I,D;const k=t(),C=a(),E=i(e=>e.session.user),[G,O]=s.useState("overview"),[$,M]=s.useState(!1);s.useEffect(()=>{(null==k?void 0:k.id)||C("/groups")},[k,C]);const T=s.useMemo(()=>{if(!k)return[];let e=k.members||[];if(!e.some(e=>e.userId===k.organizerId)&&k.organizer){e=[{id:`organizer_${k.organizerId}`,userId:k.organizerId,groupId:k.id,isOrganizer:!0,user:{id:k.organizer.id,firstName:k.organizer.firstName,lastName:k.organizer.lastName,username:k.organizer.username,email:k.organizer.email,profileImage:k.organizer.profileImage}},...e]}else e=e.map(e=>({...e,isOrganizer:e.userId===k.organizerId}));return e.sort((e,s)=>e.isOrganizer&&!s.isOrganizer?-1:!e.isOrganizer&&s.isOrganizer?1:e.user.firstName.localeCompare(s.user.firstName))},[k]),S=s.useMemo(()=>!(!E||!T.length)&&T.some(e=>e.userId===E.id),[E,T]),A=s.useMemo(()=>(null==E?void 0:E.id)===(null==k?void 0:k.organizerId),[E,k]),{upcomingEvents:U,pastEvents:J}=s.useMemo(()=>{if(!(null==k?void 0:k.events))return{upcomingEvents:[],pastEvents:[]};const e=new Date,s=k.events.filter(s=>new Date(s.startDate)>=e),t=k.events.filter(s=>new Date(s.startDate)<e);return s.sort((e,s)=>new Date(e.startDate).getTime()-new Date(s.startDate).getTime()),t.sort((e,s)=>new Date(s.startDate).getTime()-new Date(e.startDate).getTime()),{upcomingEvents:s,pastEvents:t}},[null==k?void 0:k.events]),L=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),P=()=>{C("/signup",{state:{from:`/groups/${k.id}`,groupId:k.id}})},F=({onClose:s})=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(w,{size:24,className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Delete Group"}),e.jsx("p",{className:"text-slate-600 text-sm",children:"This action cannot be undone"})]})]}),e.jsxs("p",{className:"text-slate-700 mb-6",children:["Are you sure you want to permanently delete"," ",e.jsxs("strong",{children:['"',k.name,'"']}),"? All events, members, and group data will be lost forever."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),e.jsxs(r,{method:"post",className:"flex-1",children:[e.jsx("input",{type:"hidden",name:"intent",value:"delete-group"}),e.jsx("input",{type:"hidden",name:"id",value:k.id}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Delete Group"})]})]})]})});return k?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(l,{to:"/groups",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(d,{size:20}),"Groups"]})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(l,{to:"/groups/new",className:"inline-flex items-center gap-2 text-slate-600 hover:text-orange-600 font-medium transition-colors",children:["Create Another Group",e.jsx(o,{size:16})]})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mb-8",children:e.jsxs("div",{className:"relative h-64 md:h-80",children:[e.jsx("img",{src:k.image,alt:k.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:k.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:16}),k.city,", ",k.state]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(n,{size:16}),T.length," members"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{size:16}),(null==(y=k.events)?void 0:y.length)||0," events"]}),e.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full text-xs",children:k.type})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:E?A?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>C(`/groups/${k.id}/events/new`),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(h,{size:16}),"Create Event"]}),e.jsxs("button",{onClick:()=>C(`/groups/${k.id}/edit`),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(p,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>M(!0),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[e.jsx(g,{size:16}),"Delete"]})]}):S?e.jsxs(r,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"leave-group"}),e.jsx("input",{type:"hidden",name:"id",value:k.id}),e.jsx("input",{type:"hidden",name:"userId",value:E.id}),e.jsx("input",{type:"hidden",name:"memberId",value:E.id}),e.jsxs("button",{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[e.jsx(u,{size:18}),"Leave Group"]})]}):e.jsxs(r,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"join-group"}),e.jsx("input",{type:"hidden",name:"id",value:k.id}),e.jsx("input",{type:"hidden",name:"userId",value:E.id}),e.jsxs("button",{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[e.jsx(x,{size:18}),"Join Group"]})]}):e.jsxs("button",{onClick:P,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[e.jsx(x,{size:18}),"Join Group"]})})]})})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-1",children:e.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Overview",icon:j},{id:"events",label:"Events",icon:m},{id:"members",label:"Members",icon:n},{id:"photos",label:"Photos",icon:b}].map(({id:s,label:t,icon:a})=>e.jsxs("button",{onClick:()=>O(s),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors "+(G===s?"bg-orange-100 text-orange-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-50"),children:[e.jsx(a,{size:18}),t]},s))})}),"overview"===G&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"About This Group"}),e.jsx("p",{className:"text-slate-700 leading-relaxed",children:k.about})]}),k.organizer&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Meet the Organizer"}),e.jsxs(l,{to:`/users/${k.organizer.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsx("img",{src:k.organizer.profileImage,alt:k.organizer.username,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-slate-900",children:[k.organizer.firstName," ",k.organizer.lastName]}),e.jsxs("p",{className:"text-slate-600 text-sm",children:["@",k.organizer.username]}),k.organizer.bio&&e.jsx("p",{className:"text-slate-700 text-sm mt-1 line-clamp-2",children:k.organizer.bio})]})]})]}),U.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Upcoming Events"}),e.jsx("button",{onClick:()=>O("events"),className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:U.slice(0,3).map(s=>e.jsxs(l,{to:`/events/${s.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:s.name}),e.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{size:12}),L(s.startDate)]}),s.venueInfo&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:12}),s.venueInfo.city,","," ",s.venueInfo.state]})]})]})]},s.id))})]})]}),"events"===G&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Upcoming Events (",U.length,")"]}),0===U.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(m,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600",children:"No upcoming events scheduled."}),A&&e.jsx("button",{onClick:()=>C(`/groups/${k.id}/events/new`),className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Create First Event"})]}):e.jsx("div",{className:"grid gap-4",children:U.map(s=>e.jsxs(l,{to:`/events/${s.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-20 h-20 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:s.name}),e.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{size:14}),L(s.startDate)]}),s.venueInfo&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:14}),s.venueInfo.city,","," ",s.venueInfo.state]})]})]})]},s.id))})]}),J.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Past Events (",J.length,")"]}),e.jsx("div",{className:"grid gap-4",children:J.map(s=>e.jsxs(l,{to:`/events/${s.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100 opacity-75",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:s.name}),e.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-1",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{size:12}),L(s.startDate)]}),s.venueInfo&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(c,{size:12}),s.venueInfo.city,","," ",s.venueInfo.state]})]})]})]},s.id))})]})]}),"members"===G&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Members (",T.length,")"]}),E?0===T.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"No members yet. Be the first to join!"}),!S&&e.jsxs(r,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"join-group"}),e.jsx("input",{type:"hidden",name:"id",value:k.id}),e.jsx("input",{type:"hidden",name:"userId",value:E.id}),e.jsx("button",{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Join This Group"})]})]}):e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-4",children:T.map(s=>e.jsxs(l,{to:`/users/${s.userId}`,className:"flex items-center gap-3 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100 relative",children:[s.isOrganizer&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(N,{size:16,className:"text-yellow-500 fill-current"})}),e.jsx("img",{src:s.user.profileImage,alt:s.user.username,className:"w-12 h-12 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:"font-semibold text-slate-900",children:[s.user.firstName," ",s.user.lastName]}),s.isOrganizer&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium",children:"Organizer"})]}),e.jsxs("p",{className:"text-slate-600 text-sm",children:["@",s.user.username]})]})]},`${s.userId}-${s.groupId}`))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(n,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"You must be logged in to view group members."}),e.jsx("button",{onClick:P,className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Sign Up to View Members"})]})]}),"photos"===G&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Group Photos"}),k.groupImage&&0!==(null==(z=k.groupImage)?void 0:z.length)?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:null==(I=k.groupImage)?void 0:I.map(s=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden hover:opacity-90 transition-opacity cursor-pointer",children:e.jsx("img",{src:s.groupImage,alt:s.name,className:"w-full h-full object-cover"})},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(b,{size:48,className:"mx-auto text-slate-300 mb-4"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"No photos uploaded yet."}),A&&e.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Add Photos"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Group Stats"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Members"}),e.jsx("span",{className:"font-semibold text-slate-900",children:T.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Events"}),e.jsx("span",{className:"font-semibold text-slate-900",children:(null==(D=k.events)?void 0:D.length)||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Upcoming"}),e.jsx("span",{className:"font-semibold text-slate-900",children:U.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Type"}),e.jsx("span",{className:"font-semibold text-slate-900",children:k.type})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Location"}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[e.jsx(c,{size:16}),e.jsxs("span",{children:[k.city,", ",k.state]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Share This Group"}),e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors",children:[e.jsx(f,{size:16}),"Share Group"]})]})]})]})]}),$&&e.jsx(F,{onClose:()=>M(!1)})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n,{size:32,className:"text-slate-400"})}),e.jsx("p",{className:"text-slate-600",children:"Group not found."})]})})};export{y as default};
