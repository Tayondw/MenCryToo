import{j as e}from"./index-D1HbfN_4.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{L as t,u as a,f as r}from"./router-vendor-DqRelNZw.js";import{P as i,u as l,a as n,b as o}from"./CommentThread-d2zcaQG9.js";import{u as d,C as c}from"./CommentModal-DRji3glo.js";import"./redux-vendor-s9F9CGgp.js";import{E as m,G as x}from"./EventsCard-CTK_jxI1.js";import{e as g,a0 as h,R as u,a1 as p,u as f,h as j,C as v,c as N,x as b,z as y,U as w,a2 as C,a as k,l as L,w as z,B as M,a4 as S}from"./ui-vendor-LOG_mfyu.js";const T=({icon:s,title:a,description:r,actionButton:i})=>e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(s,{className:"text-white",size:24})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:a}),e.jsx("p",{className:"text-gray-600 mb-4",children:r}),i&&e.jsxs(t,{to:i.to,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200",children:[e.jsx(i.icon,{size:16}),i.text]})]})}),E=({post:s,userDetails:t,formatTimeAgo:a,onLikeToggle:r,onCommentsClick:l,onPostClick:n,currentLikeState:o,isAuthenticated:d,onLikesClick:c,currentCommentCount:m})=>e.jsxs("article",{className:"post-card-fixed group",children:[e.jsx("div",{className:"post-header-fixed",children:e.jsxs("div",{className:"post-user-info-fixed",children:[e.jsx("img",{src:null==t?void 0:t.profileImage,alt:null==t?void 0:t.username,className:"post-avatar-fixed"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("span",{className:"post-username-fixed block",children:null==t?void 0:t.username})})]})}),e.jsx("div",{className:"post-title-section-fixed",children:e.jsx("h3",{className:"post-title-fixed",onClick:()=>n(s.id),children:s.title})}),s.image&&e.jsxs("div",{className:"post-image-section-fixed",onClick:()=>n(s.id),children:[e.jsx("img",{src:s.image,alt:s.title,className:"post-image-fixed"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"post-content-fixed",children:[e.jsxs("div",{className:"post-actions-fixed",children:[d?e.jsx(i,{postId:s.id,initialLikeCount:o.likeCount,initialIsLiked:o.isLiked,onLikeToggle:r,onLikesClick:()=>c(s.id),size:18,disabled:o.isLoading}):e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(g,{size:18}),e.jsx("span",{className:"text-sm font-medium cursor-pointer hover:text-orange-600 transition-colors",onClick:()=>c(s.id),children:o.likeCount})]}),e.jsxs("button",{onClick:()=>l(s.id),className:"flex items-center gap-2 text-gray-600 hover:text-blue-500 transition-colors duration-200",children:[e.jsx(h,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:m})]}),e.jsx("button",{className:"flex items-center gap-2 text-gray-600 hover:text-green-500 transition-colors duration-200 ml-auto",children:e.jsx(u,{size:16})}),e.jsx("button",{className:"flex items-center gap-2 text-gray-600 hover:text-yellow-500 transition-colors duration-200",children:e.jsx(p,{size:16})})]}),e.jsxs("div",{className:"post-caption-fixed",children:[e.jsx("span",{className:"caption-username-fixed",children:null==t?void 0:t.username}),e.jsxs("span",{className:"caption-time-fixed",children:[e.jsx(f,{size:12}),a(s.updatedAt)]}),e.jsx("span",{className:"caption-text-fixed",children:s.caption})]})]})]}),P=()=>e.jsx(j,{}),A=()=>{const i=a(),{user:g,isOwnProfile:h,isAuthenticated:u}=r(),{likeStates:p,setLikeState:f,fetchLikeStatus:j}=l(),{isOpen:A,postId:D,openModal:I,closeModal:U}=n(),{modal:B,openModal:G,closeModal:O}=d(),[F,Y]=s.useState("posts"),[$,R]=s.useState("tags"),[J,V]=s.useState("grid"),[q,H]=s.useState(""),[K,Q]=s.useState(new Map),W=s.useMemo(()=>(null==g?void 0:g.usersTags)??[],[g]),X=s.useMemo(()=>(null==g?void 0:g.posts)??[],[g]),Z=s.useMemo(()=>(null==g?void 0:g.group)??[],[g]),_=s.useMemo(()=>(null==g?void 0:g.events)??[],[g]),ee=s.useMemo(()=>[...X].sort((e,s)=>new Date(s.updatedAt).getTime()-new Date(e.updatedAt).getTime()),[X]);s.useEffect(()=>{X.forEach(e=>{p.has(e.id)||(f(e.id,!1,e.likes),j(e.id))})},[X,p,f,j]),s.useEffect(()=>{const e=new Map;X.forEach(s=>{e.set(s.id,s.comments||0)}),Q(e)},[X]);const se=s.useCallback(async(e,s,t)=>{f(e,s,t)},[f]),te=s.useCallback(e=>{I(e)},[I]),ae=s.useCallback(e=>{X.find(s=>s.id===e);const s=(e,s)=>{Q(t=>{const a=new Map(t);return a.set(e,s),a})};G(e,[],s)},[X,G]),re=s.useCallback(e=>{i(`/posts/${e}`)},[i]),ie=s.useMemo(()=>{if("posts"!==F)return[];if(!q)return ee;const e=q.toLowerCase();return ee.filter(s=>s.title.toLowerCase().includes(e)||s.caption.toLowerCase().includes(e))},[F,q,ee]),le=s.useMemo(()=>{if("groups"!==F)return[];if(!q)return Z;const e=q.toLowerCase();return Z.filter(s=>s.name.toLowerCase().includes(e)||s.about.toLowerCase().includes(e))},[F,q,Z]),ne=s.useMemo(()=>{if("events"!==F)return[];if(!q)return _;const e=q.toLowerCase();return _.filter(s=>s.name.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))},[F,q,_]),oe=s.useCallback(e=>{const s=new Date,t=new Date(e);return`${Math.floor((s.getTime()-t.getTime())/864e5)}d ago`},[]),de=s.useCallback(()=>X.reduce((e,s)=>e+(s.likes||0),0),[X]),ce=s.useCallback(()=>{switch(F){case"posts":return ie.length;case"groups":return le.length;case"events":return ne.length;default:return 0}},[F,ie.length,le.length,ne.length]),me=s.useCallback(()=>{const s=()=>"posts"===F?"grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-6 w-full":"space-y-6":"grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6",t={icon:y,title:"No Posts Yet",description:"This user hasn't shared any posts yet.",actionButton:u?{to:"/posts/create",text:"Create Post",icon:b}:void 0},a={icon:N,title:"No Groups Yet",description:"This user hasn't joined any groups yet.",actionButton:{to:"/groups",text:"Explore Groups",icon:N}},r={icon:v,title:"No Events Yet",description:"This user isn't attending any events yet.",actionButton:{to:"/events",text:"Explore Events",icon:v}};switch(F){case"posts":return 0===ie.length?e.jsx(T,{...t}):e.jsx("div",{className:s(),children:ie.map(s=>{const t=p.get(s.id)||{isLiked:!1,likeCount:s.likes,isLoading:!1},a=K.get(s.id)??(s.comments||0);return e.jsx(E,{post:s,userDetails:g,formatTimeAgo:oe,onLikeToggle:se,onCommentsClick:ae,onPostClick:re,onLikesClick:te,currentLikeState:t,isAuthenticated:u,currentCommentCount:a},s.id)})});case"groups":return 0===le.length?e.jsx(T,{...a}):e.jsx("div",{className:s(),children:le.map(s=>e.jsx(x,{group:s},s.id))});case"events":return 0===ne.length?e.jsx(T,{...r}):e.jsx("div",{className:s(),children:ne.map(s=>e.jsx(m,{event:s},s.id))});default:return null}},[F,J,ie,le,ne,g,oe,se,ae,re,te,p,u,K]),xe=s.useCallback(()=>"tags"===$?W.length>0?e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(s=>e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-orange-100 to-slate-100 text-gray-700 text-sm font-medium rounded-full border border-gray-200 hover:shadow-sm transition-all duration-200",children:s.name},s.id))})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(w,{className:"text-gray-400",size:20})}),e.jsx("p",{className:"text-gray-500 text-sm",children:"No tags added yet."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(C,{className:"text-white",size:20})}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Discover Similar Users"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Find users with similar interests"})]}),e.jsx(t,{to:"/profile-feed",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(k,{size:16}),"Find Similar Users"]})})]}),[$,W]);return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Redirecting to your profile..."}),e.jsx(t,{to:"/profile",className:"text-orange-600 hover:text-orange-800",children:"Click here if not redirected automatically"})]})}):g?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(t,{to:"/profile-feed",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-all duration-200",children:[e.jsx(L,{size:18}),"Back to Profiles"]}),e.jsx("div",{className:"flex items-center gap-3",children:u?e.jsxs(e.Fragment,{children:[e.jsx(t,{to:"/profile",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-all duration-200",children:"My Profile"}),e.jsxs(t,{to:"/posts/create",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(b,{size:16}),"Create Post"]})]}):e.jsx(t,{to:"/login",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Sign In"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("main",{className:"lg:col-span-3 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"relative h-32 bg-gradient-to-r from-orange-500 to-slate-600",children:e.jsx("div",{className:"absolute inset-0 bg-black/20"})}),e.jsx("div",{className:"relative px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:gap-6 -mt-16",children:[e.jsx("div",{className:"relative self-center",children:e.jsx("img",{src:g.profileImage,alt:g.username,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"})}),e.jsxs("div",{className:"flex-1 mt-20 sm:mt-20",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:g.username}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[g.firstName," ",g.lastName]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Member since"," ",new Date(g.createdAt||"").toLocaleDateString()]}),g.bio&&e.jsx("p",{className:"text-gray-700 mt-4 leading-relaxed",children:g.bio}),e.jsxs("div",{className:"flex items-center gap-8 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:X.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Posts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:de()}),e.jsx("div",{className:"text-sm text-gray-500",children:"Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:Z.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Groups"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:_.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Events"})]})]})]})]})})]}),e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:["posts","groups","events"].map(s=>e.jsxs("button",{onClick:()=>Y(s),className:"px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 "+(F===s?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[s.charAt(0).toUpperCase()+s.slice(1)," (","posts"===s?X.length:"groups"===s?Z.length:_.length,")"]},s))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:`Search ${F}...`,value:q,onChange:e=>H(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>V("grid"),className:"p-2 rounded-md transition-all duration-200 "+("grid"===J?"bg-white shadow-sm text-orange-600":"text-gray-500 hover:text-gray-700"),children:e.jsx(y,{size:16})}),e.jsx("button",{onClick:()=>V("list"),className:"p-2 rounded-md transition-all duration-200 "+("list"===J?"bg-white shadow-sm text-orange-600":"text-gray-500 hover:text-gray-700"),children:e.jsx(M,{size:16})})]})]})]}),q&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",ce(),' results for "',q,'"']})]}),e.jsx("div",{className:"p-6",children:me()})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:[e.jsx("button",{onClick:()=>R("tags"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("tags"===$?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"User Tags"}),e.jsx("button",{onClick:()=>R("similar"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("similar"===$?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Similar"})]}),xe()]}),e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(S,{size:16,className:"text-orange-500"}),"User Stats"]}),e.jsx("div",{className:"space-y-3",children:[{label:"Total Posts",value:X.length},{label:"Total Likes",value:de()},{label:"Groups Joined",value:Z.length},{label:"Events Attending",value:_.length},{label:"Profile Tags",value:W.length}].map(({label:s,value:t})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s}),e.jsx("span",{className:"font-semibold text-gray-800",children:t})]},s))})]}),e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(w,{size:16,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Full Name"}),e.jsxs("p",{className:"font-medium text-gray-800",children:[g.firstName," ",g.lastName]})]})]}),(u||g.email)&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(P,{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800",children:g.email||"Not public"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(v,{size:16,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Member Since"}),e.jsx("p",{className:"font-medium text-gray-800",children:new Date(g.createdAt||"").toLocaleDateString()})]})]})]})]})]})]})}),e.jsxs("section",{className:"lg:hidden bg-white rounded-2xl shadow-sm border border-gray-100 p-6 max-w-7xl mx-auto mt-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:"User Profile Tags"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"View interests and find similar users"})]}),e.jsxs("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:[e.jsx("button",{onClick:()=>R("tags"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("tags"===$?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"User Tags"}),e.jsx("button",{onClick:()=>R("similar"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("similar"===$?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Similar"})]}),xe()]}),e.jsx(c,{isOpen:B.isOpen,onClose:O,postId:B.postId||0,initialComments:B.comments,onCommentsChange:(e,s)=>{Q(t=>{const a=new Map(t);return a.set(e,s),a})}}),A&&D&&e.jsx(o,{isOpen:A,onClose:U,postId:D,initialCount:0})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading user profile..."})]})})};export{A as default};
