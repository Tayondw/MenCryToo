import{j as e}from"./index-CXIZax8x.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{e as a,d as r,b as i,L as l,F as o}from"./router-vendor-DFbjbkyO.js";import{A as n,n as c,E as t,a as d}from"./ui-vendor-DzNpKoho.js";import"./redux-vendor-s9F9CGgp.js";const m=()=>{const m=a(),h=r(),p=i(),u=null==m?void 0:m.user,[N,x]=s.useState({email:"",username:"",password:"",confirmPassword:"",firstName:"",lastName:"",bio:"",userTags:["ANGER"]}),[j,g]=s.useState(!1),[v,f]=s.useState(!1),[b,w]=s.useState(null);s.useEffect(()=>{var e;u&&x({firstName:u.firstName||"",lastName:u.lastName||"",email:u.email||"",password:"",username:u.username||"",bio:u.bio||"",userTags:(null==(e=u.usersTags)?void 0:e.map(e=>e.name))||["ANGER"],confirmPassword:""})},[u]);const T=(e,s)=>{x(a=>({...a,[e]:s}))},y="submitting"===p.state,P=(null==h?void 0:h.errors)||{};return u?e.jsx("div",{className:"update-profile-container",children:e.jsxs("div",{className:"update-profile-content",children:[e.jsxs("div",{className:"profile-header",children:[e.jsxs(l,{to:"/profile",className:"back-link",children:[e.jsx(n,{size:20}),"Back to Profile"]}),e.jsx("h1",{className:"page-title",children:"My Profile"})]}),e.jsxs(o,{method:"post",encType:"multipart/form-data",className:"profile-form",children:[e.jsx("input",{type:"hidden",name:"intent",value:"update-profile"}),e.jsx("input",{type:"hidden",name:"userId",value:u.id.toString()}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-info",children:[e.jsx("h2",{className:"section-title",children:"Profile Photo"}),e.jsx("p",{className:"section-description",children:"This image will be displayed on your profile"})]})}),e.jsxs("div",{className:"photo-upload-area",children:[e.jsx("div",{className:"photo-container",children:e.jsx("img",{src:b||u.profileImage,alt:"Profile",className:"profile-photo"})}),e.jsxs("div",{className:"upload-controls",children:[e.jsxs("label",{htmlFor:"profile-image",className:"upload-btn",children:[e.jsx(c,{size:16}),"Click to upload"]}),e.jsx("span",{className:"upload-text",children:"or drag and drop"}),e.jsx("p",{className:"upload-help",children:"JPG, PNG, or GIF (Recommended size 1000x1000px)"}),e.jsx("input",{id:"profile-image",name:"profileImage",type:"file",accept:"image/*",onChange:e=>{var s;const a=null==(s=e.target.files)?void 0:s[0];if(a){const e=new FileReader;e.onload=e=>{var s;w(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(a)}},className:"hidden-input"})]})]}),P.profileImage&&e.jsx("div",{className:"error-message",children:P.profileImage})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-info",children:[e.jsx("h2",{className:"section-title",children:"Personal Information"}),e.jsx("p",{className:"section-description",children:"Update your personal details here."})]})}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{id:"firstName",name:"firstName",type:"text",value:N.firstName,onChange:e=>T("firstName",e.target.value),placeholder:"Carter",className:P.firstName?"error":""}),P.firstName&&e.jsx("div",{className:"error-message",children:P.firstName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{id:"lastName",name:"lastName",type:"text",value:N.lastName,onChange:e=>T("lastName",e.target.value),placeholder:"Leadstream",className:P.lastName?"error":""}),P.lastName&&e.jsx("div",{className:"error-message",children:P.lastName})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",value:N.email,onChange:e=>T("email",e.target.value),placeholder:"carter@domain.com",className:P.email?"error":""}),P.email&&e.jsx("div",{className:"error-message",children:P.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",value:N.username,onChange:e=>T("username",e.target.value),placeholder:"carter-leadstream",className:P.username?"error":""}),P.username&&e.jsx("div",{className:"error-message",children:P.username})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-info",children:[e.jsx("h2",{className:"section-title",children:"Password"}),e.jsx("p",{className:"section-description",children:"Leave blank to keep current password"})]})}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{id:"password",name:"password",type:j?"text":"password",value:N.password,onChange:e=>T("password",e.target.value),placeholder:"••••••••••••",className:"password-field "+(P.password?"error":"")}),e.jsx("button",{type:"button",onClick:()=>g(!j),className:"password-toggle",children:j?e.jsx(t,{size:16}):e.jsx(d,{size:16})})]}),P.password&&e.jsx("div",{className:"error-message",children:P.password})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"password-input",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:v?"text":"password",value:N.confirmPassword,onChange:e=>T("confirmPassword",e.target.value),placeholder:"••••••••••••",className:"password-field "+(P.confirmPassword?"error":"")}),e.jsx("button",{type:"button",onClick:()=>f(!v),className:"password-toggle",children:v?e.jsx(t,{size:16}):e.jsx(d,{size:16})})]}),P.confirmPassword&&e.jsx("div",{className:"error-message",children:P.confirmPassword})]})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-info",children:[e.jsx("h2",{className:"section-title",children:"About You"}),e.jsx("p",{className:"section-description",children:"Tell us about yourself and why you're here"})]})}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"bio",children:"Bio"}),e.jsx("textarea",{id:"bio",name:"bio",value:N.bio,onChange:e=>T("bio",e.target.value),placeholder:"Hi, my name is Demo User and I have anger management issues.",rows:4,className:P.bio?"error":""}),e.jsxs("div",{className:"character-count",children:[N.bio.length,"/500"]}),P.bio&&e.jsx("div",{className:"error-message",children:P.bio})]})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("div",{className:"section-header",children:e.jsxs("div",{className:"section-info",children:[e.jsx("h2",{className:"section-title",children:"Your Tags"}),e.jsx("p",{className:"section-description",children:"Select topics that resonate with you. This helps connect you with similar users"})]})}),e.jsx("div",{className:"tags-grid",children:["ANGER","ANXIETY","DEPRESSION","SUBSTANCE ABUSE","STRESS","TRAUMA","RELATIONSHIPS","GRIEF","COMING OUT","SUICIDAL THOUGHTS"].map(s=>e.jsxs("label",{className:"tag-checkbox",children:[e.jsx("input",{type:"checkbox",name:"userTags",value:s,checked:N.userTags.includes(s),onChange:e=>{e.target.checked?T("userTags",[...N.userTags,s]):T("userTags",N.userTags.filter(e=>e!==s))}}),e.jsx("span",{className:"checkmark"}),e.jsx("span",{className:"tag-label",children:s})]},s))}),u.usersTags&&u.usersTags.length>0&&e.jsxs("div",{className:"current-tags",children:[e.jsx("h4",{children:"Your Current Tags"}),e.jsx("div",{className:"current-tags-list",children:u.usersTags.map(s=>e.jsx("span",{className:"current-tag",children:s.name},s.id))})]}),P.userTags&&e.jsx("div",{className:"error-message",children:P.userTags})]}),P.server&&e.jsx("div",{className:"form-section",children:e.jsx("div",{className:"error-message",style:{textAlign:"center",fontSize:"1rem"},children:P.server})}),e.jsxs("div",{className:"final-actions",children:[e.jsx(l,{to:"/profile",className:"cancel-btn",children:"Cancel"}),e.jsx("button",{type:"submit",className:"save-btn primary",disabled:y,children:y?"Updating...":"Update Profile"})]})]})]})}):e.jsx("div",{className:"update-profile-container",children:e.jsx("div",{className:"update-profile-content",children:e.jsx("p",{children:"Loading..."})})})};export{m as default};
