import{j as e}from"./index-fkdTXUqh.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{f as t,e as a,u as l,L as r,F as o}from"./router-vendor-DqRelNZw.js";import{a as n}from"./redux-vendor-s9F9CGgp.js";import{l as i,c as d,t as c,W as m,j as x,O as u,o as h,Y as p,n as g}from"./ui-vendor-LOG_mfyu.js";const j=()=>{const j=t(),b=a(),f=n(e=>e.session.user),N=l(),[v,y]=s.useState(""),[w,k]=s.useState(""),[C,G]=s.useState(""),[z,S]=s.useState(""),[P,F]=s.useState(""),[I,L]=s.useState(null),[U,$]=s.useState(null),[E,Y]=s.useState(!1),D=150;s.useEffect(()=>{f||N("/")},[f,N]),s.useEffect(()=>{f&&j.organizerId!==f.id&&N("/")},[j,f,N]),s.useEffect(()=>{j&&(S(j.city||""),F(j.state||""),y(j.name||""),k(j.about||""),G(j.type||""),$(j.image||null))},[j]);const A=v.length>=3&&v.length<=50&&w.length>=20&&w.length<=D&&""!==C&&z.length>=3&&z.length<=30&&2===P.length;return f?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs(r,{to:`/groups/${j.id}`,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(i,{size:20}),"Back to Group"]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:j.image,alt:j.name,className:"w-full h-auto object-cover rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent flex items-end",children:e.jsxs("div",{className:"p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Update Your Group"}),e.jsx("p",{className:"text-slate-200",children:"Refine your community's information"})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{size:18,className:"text-orange-500"}),"Group Preview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:U||j.image,alt:"Preview",className:"w-full h-48 object-cover"})}),e.jsx("h4",{className:"font-semibold text-lg text-slate-800",children:v||j.name}),e.jsx("p",{className:"text-slate-700 text-sm",children:w||j.about}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 text-sm",children:[e.jsx(c,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:[z||j.city,(z||j.city)&&(P||j.state)&&", ",P||j.state]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-600 text-sm",children:[e.jsx(m,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:["in-person"===(C||j.type)?"In Person":"Online"," ","Group"]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(d,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Update Group"}),e.jsx("p",{className:"text-slate-600",children:"Refine your group's information to better serve your community"})]})]}),e.jsxs(o,{method:"post",action:`/groups/${j.id}/edit`,encType:"multipart/form-data",className:"space-y-6",onSubmit:()=>{Y(!0)},children:[e.jsx("input",{type:"hidden",name:"organizer_id",value:f.id}),e.jsx("input",{type:"hidden",name:"id",value:j.id}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(c,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Location"})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Groups meet locally, in person, and online. We'll connect you with people in your area."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-slate-700",children:"City"}),e.jsx("input",{id:"city",name:"city",type:"text",value:z,onChange:e=>S(e.target.value),placeholder:"Enter city name",className:`w-full px-4 py-3 border ${(null==b?void 0:b.city)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`}),(null==b?void 0:b.city)&&e.jsx("p",{className:"text-red-600 text-sm",children:b.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-slate-700",children:"State"}),e.jsx("input",{id:"state",name:"state",type:"text",value:P,onChange:e=>F(e.target.value.toUpperCase()),placeholder:"CA",maxLength:2,className:`w-full px-4 py-3 border ${(null==b?void 0:b.state)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors uppercase`}),(null==b?void 0:b.state)&&e.jsx("p",{className:"text-red-600 text-sm",children:b.state}),e.jsx("p",{className:"text-xs text-slate-500",children:"Please use the two-letter state code (e.g., CA, NY)"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(d,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Group Name"})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Choose a name that will give people a clear idea of what the group is about."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700",children:"Group Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"e.g., Anxiety Support Circle",className:`w-full px-4 py-3 border ${(null==b?void 0:b.name)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,maxLength:50}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==b?void 0:b.name)?e.jsx("p",{className:"text-red-600",children:b.name}):e.jsx("p",{className:"text-slate-500",children:v.length<3?"Please enter at least 3 characters":"Great! Your group name looks good"})}),e.jsxs("div",{className:""+(v.length>40?"text-orange-500":v.length>=3?"text-green-500":"text-slate-500"),children:[v.length,"/",50]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(x,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Description"})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Describe the purpose of your group, who should join, and what you'll do at your events."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"about",className:"block text-sm font-medium text-slate-700",children:"Group Description"}),e.jsx("textarea",{id:"about",name:"about",value:w,onChange:e=>k(e.target.value),placeholder:"Please write at least 20 characters describing your group...",rows:5,className:`w-full px-4 py-3 border ${(null==b?void 0:b.about)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors resize-none`,maxLength:D}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==b?void 0:b.about)?e.jsx("p",{className:"text-red-600",children:b.about}):e.jsx("p",{className:"text-slate-500",children:w.length<20?"Please write at least 20 characters":"Great! Your description looks good"})}),e.jsxs("div",{className:""+(w.length>120?"text-orange-500":w.length>=20?"text-green-500":"text-slate-500"),children:[w.length,"/",D]})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Group Image"})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Upload a new image for your group or keep the current one."}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-slate-300 flex-shrink-0",children:e.jsx("img",{src:U||j.image,alt:"Current",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:"Current Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload a new image to replace it (optional)"})]})]}),e.jsxs("div",{onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center cursor-pointer hover:border-orange-300 hover:bg-orange-50 transition-all duration-200",children:[e.jsx(h,{size:24,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Click to upload a new image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, or GIF (max 5MB)"})]}),e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t){L(t);const e=new FileReader;e.onload=e=>{var s;$(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(t)}},className:"hidden"}),(null==b?void 0:b.image)&&e.jsx("p",{className:"text-red-600 text-xs",children:b.image})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{size:20,className:"text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Group Type"})]}),e.jsx("p",{className:"text-slate-600 text-sm mb-4",children:"Let people know if your group will meet in person or online."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700",children:"Is this an in-person or online group?"}),e.jsxs("select",{id:"type",name:"type",value:C,onChange:e=>G(e.target.value),className:`w-full px-4 py-3 border ${(null==b?void 0:b.type)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,children:[e.jsx("option",{value:"",children:"Select one"}),e.jsx("option",{value:"in-person",children:"In Person"}),e.jsx("option",{value:"online",children:"Online"})]}),(null==b?void 0:b.type)&&e.jsx("p",{className:"text-red-600 text-sm",children:b.type})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{size:16,className:"text-orange-500"}),e.jsx("h4",{className:"font-medium text-slate-800",children:"Update Tips"})]}),e.jsxs("ul",{className:"text-sm text-slate-700 space-y-1 pl-6 list-disc",children:[e.jsx("li",{children:"Keep your group name clear and descriptive"}),e.jsx("li",{children:"Ensure your description accurately reflects your group's purpose"}),e.jsx("li",{children:"Consider updating your image to keep your group fresh"}),e.jsx("li",{children:"Double-check your location information for accuracy"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx(r,{to:`/groups/${j.id}`,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200 text-center font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",name:"intent",value:"edit-group",disabled:!A||E,className:`px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 ${A&&!E?"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg":"bg-slate-300 text-slate-500 cursor-not-allowed"} transition-all duration-200`,children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{size:18}),"Update Group"]})})]})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Please Log In"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You need to be logged in to update a group."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(r,{to:"/login",className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200",children:"Log In"}),e.jsx(r,{to:"/",className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200",children:"Go Home"})]})]})})};export{j as default};
