import{j as e}from"./index-D_QOT4VP.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{e as t,u as a,L as l,F as r}from"./router-vendor-DFbjbkyO.js";import{a as n}from"./redux-vendor-s9F9CGgp.js";import{A as o,a0 as i,I as d,J as c,t as m,e as x,a1 as h,a2 as u,Q as p,a6 as j,U as b}from"./ui-vendor-CiRjMc1E.js";const g=()=>{var g,f;const v=t(),N=n(e=>e.session.user),w=a(),[y,z]=s.useState(""),[C,k]=s.useState(!1),[S,I]=s.useState(!1),[$,D]=s.useState(v.likes),A=(null==N?void 0:N.id)===v.creator;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs(l,{to:"/similar-feed",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(o,{size:20}),"Back to Posts"]}),A&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>k(!C),className:"p-2 rounded-lg text-slate-600 hover:text-slate-900 hover:bg-slate-100 transition-colors",children:e.jsx(i,{size:20})}),C&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50",children:[e.jsxs("button",{onClick:()=>{w(`/posts/${v.id}/edit`),k(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-left text-slate-700 hover:bg-slate-100",children:[e.jsx(d,{size:16}),"Edit Post"]}),e.jsxs("button",{onClick:()=>{if(window.confirm("Are you sure you want to delete this post? This action cannot be undone.")){const e=new FormData;e.append("intent","delete-post"),e.append("postId",v.id.toString());const s=document.createElement("form");s.method="post",s.action=`/posts/${v.id}/delete`;const t=document.createElement("input");t.type="hidden",t.name="intent",t.value="delete-post";const a=document.createElement("input");a.type="hidden",a.name="postId",a.value=v.id.toString(),s.appendChild(t),s.appendChild(a),document.body.appendChild(s),s.submit()}k(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-left text-red-600 hover:bg-red-50",children:[e.jsx(c,{size:16}),"Delete Post"]})]})]})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{to:`/users/${v.user.id}`,className:"flex-shrink-0",children:e.jsx("img",{src:v.user.profileImage,alt:v.user.username,className:"w-12 h-12 rounded-full object-cover border-2 border-slate-200"})}),e.jsxs("div",{children:[e.jsx(l,{to:`/users/${v.user.id}`,className:"font-semibold text-slate-900 hover:text-orange-600 transition-colors",children:v.user.username}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(m,{size:14,className:"mr-1"}),e.jsx("span",{children:(E=v.createdAt,new Date(E).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]})]})}),e.jsx("img",{src:v.image,alt:v.title,className:"w-full h-auto max-h-[600px] object-contain bg-slate-100"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:v.title}),e.jsx("p",{className:"text-slate-700 whitespace-pre-line mb-6",children:v.caption}),e.jsxs("div",{className:"flex items-center justify-between border-t border-b border-slate-200 py-4 my-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{onClick:async()=>{if(N)try{I(!S),D(e=>S?e-1:e+1)}catch(e){I(!S),D(e=>S?e+1:e-1)}else w("/login")},className:`flex items-center gap-2 ${S?"text-red-500":"text-slate-500 hover:text-red-500"} transition-colors`,children:[e.jsx(x,{size:20,fill:S?"currentColor":"none"}),e.jsx("span",{className:"font-medium",children:$})]}),e.jsxs("button",{className:"flex items-center gap-2 text-slate-500 hover:text-blue-500 transition-colors",children:[e.jsx(h,{size:20}),e.jsx("span",{className:"font-medium",children:(null==(g=v.postComments)?void 0:g.length)||0})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"text-slate-500 hover:text-orange-500 transition-colors",children:e.jsx(u,{size:20})}),e.jsx("button",{className:"text-slate-500 hover:text-green-500 transition-colors",children:e.jsx(p,{size:20})})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Comments (",(null==(f=v.postComments)?void 0:f.length)||0,")"]}),N?e.jsx("form",{onSubmit:e=>{e.preventDefault(),y.trim()&&N&&z("")},className:"mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:N.profileImage,alt:N.username,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("textarea",{value:y,onChange:e=>z(e.target.value),placeholder:"Add a comment...",className:"w-full px-4 py-3 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors resize-none",rows:3}),e.jsx("button",{type:"submit",disabled:!y.trim(),className:"absolute right-3 bottom-3 text-orange-500 hover:text-orange-600 disabled:text-slate-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(j,{size:20})})]})]})}):e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 mb-6 text-center",children:[e.jsx("p",{className:"text-slate-600 mb-2",children:"You need to be logged in to comment"}),e.jsxs(l,{to:"/login",className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:[e.jsx(b,{size:16}),"Sign In to Comment"]})]}),v.postComments&&v.postComments.length>0?e.jsx("div",{className:"space-y-6",children:v.postComments.map(s=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx(l,{to:`/users/${s.userId}`,className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center text-slate-500",children:e.jsx(b,{size:16})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(l,{to:`/users/${s.userId}`,className:"font-semibold text-slate-900 hover:text-orange-600 transition-colors",children:s.username}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsx("p",{className:"text-slate-700",children:s.comment})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 ml-2",children:[e.jsx("button",{className:"text-xs text-slate-500 hover:text-orange-500 transition-colors",children:"Like"}),e.jsx("button",{className:"text-xs text-slate-500 hover:text-blue-500 transition-colors",children:"Reply"})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg",children:[e.jsx(h,{size:32,className:"mx-auto text-slate-300 mb-2"}),e.jsx("p",{className:"text-slate-600",children:"No comments yet. Be the first to comment!"})]})]})]})]}),e.jsxs(r,{method:"post",action:`/posts/${v.id}/delete`,id:"delete-post-form",className:"hidden",children:[e.jsx("input",{type:"hidden",name:"intent",value:"delete-post"}),e.jsx("input",{type:"hidden",name:"postId",value:v.id.toString()})]})]})]});var E};export{g as default};
