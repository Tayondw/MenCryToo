import{u as e,j as s}from"./index-D1HbfN_4.js";import{r as t}from"./react-vendor-DWDxyCYt.js";import{F as a,f as l,u as n,L as i}from"./router-vendor-DqRelNZw.js";import{a as d}from"./redux-vendor-s9F9CGgp.js";import{A as r,X as o,C as c,I as m,l as x,R as h,u,c as p,J as j,K as v,N as g,_ as b,O as f,W as N,t as y,Y as w}from"./ui-vendor-LOG_mfyu.js";const z=({eventDetails:l})=>{const{closeModal:n}=e(),i=e=>{e.preventDefault(),n()};return t.useEffect(()=>{const e=()=>n();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[n]),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-md w-full",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(r,{size:20,className:"text-red-600"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Confirm Delete"})]}),s.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors",children:s.jsx(o,{size:20,className:"text-slate-500"})})]})}),s.jsx("div",{className:"p-6 text-center",children:s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(c,{size:32,className:"text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Are you sure you want to delete this event?"}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"font-medium text-slate-800 mb-2",children:"Event Name:"}),s.jsxs("p",{className:"text-slate-700 italic",children:['"',l.name,'"']})]}),l.image&&s.jsxs("div",{className:"relative w-32 h-32 mx-auto mb-4 rounded-lg overflow-hidden border border-slate-200",children:[s.jsx("img",{src:l.image,alt:l.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:s.jsx(m,{size:24,className:"text-white"})})]}),l.startDate&&s.jsxs("p",{className:"text-slate-600 text-sm mb-2",children:["Scheduled for:"," ",new Date(l.startDate).toLocaleDateString()]}),l.description&&s.jsx("p",{className:"text-slate-600 text-sm line-clamp-2 mb-4",children:l.description}),s.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"This action cannot be undone. This will permanently delete the event and remove all attendees."})]})}),s.jsx("div",{className:"flex p-6 bg-slate-50 border-t border-slate-200",children:s.jsxs(a,{method:"delete",action:`/events/${l.id}`,onSubmit:n,className:"w-full flex gap-3",children:[s.jsx("input",{type:"hidden",name:"intent",value:"delete-event"}),s.jsx("input",{type:"hidden",name:"group_id",value:l.groupId}),s.jsx("input",{type:"hidden",name:"eventId",value:l.id}),s.jsx("input",{type:"hidden",name:"id",value:l.id}),s.jsxs("button",{type:"button",onClick:i,className:"flex-1 px-4 py-3 border-2 border-slate-300 text-slate-700 rounded-lg hover:bg-slate-100 hover:border-slate-400 transition-all duration-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(o,{size:18}),"Cancel"]}),s.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[s.jsx(m,{size:18}),"Delete Event"]})]})})]})},E=(e,s)=>"online"===s?{address:"Online Event",city:"Virtual",state:"",display:"This is an online event - no physical location"}:e&&(e.address||e.city)?{address:e.address||"Address TBD",city:e.city||"City TBD",state:e.state||"",display:`${e.address||"Address TBD"}, ${e.city||"City TBD"}${e.state?`, ${e.state}`:""}`}:{address:"Venue TBD",city:"Location Coming Soon",state:"",display:"Venue details will be announced soon"},D=()=>{var r;const o=l(),D=n(),I=d(e=>e.session.user),[A,C]=t.useState("overview"),[S,k]=t.useState(!1),{setModalContent:$}=e();t.useEffect(()=>{(null==o?void 0:o.id)||D("/events")},[o,D]);const T=t.useMemo(()=>!(!I||!(null==o?void 0:o.attendees))&&o.attendees.some(e=>e.user.id===I.id),[I,null==o?void 0:o.attendees]),L=t.useMemo(()=>{var e;return(null==I?void 0:I.id)===(null==(e=null==o?void 0:o.organizer)?void 0:e.id)},[I,null==o?void 0:o.organizer]),M=t.useMemo(()=>new Date(null==o?void 0:o.startDate)<new Date,[null==o?void 0:o.startDate]),B=t.useMemo(()=>(null==o?void 0:o.numAttendees)>=(null==o?void 0:o.capacity),[null==o?void 0:o.numAttendees,null==o?void 0:o.capacity]),O=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),F=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),V=()=>s.jsxs("div",{className:"fixed top-4 right-4 bg-orange-100 border border-orange-300 rounded-lg p-4 shadow-lg z-50 max-w-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(w,{size:20,className:"text-orange-600"}),s.jsx("h4",{className:"font-semibold text-orange-800",children:"Event Organizer"})]}),s.jsx("p",{className:"text-orange-700 text-sm",children:"As the event organizer, you are automatically attending this event. You cannot leave your own event."})]});if(!o)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(c,{size:32,className:"text-slate-400"})}),s.jsx("p",{className:"text-slate-600",children:"Event not found."})]})});const Y=((e,s)=>{const t=new Date(e),a=new Date(s);return t.toDateString()===a.toDateString()?{date:O(e),time:`${F(e)} - ${F(s)}`}:{date:`${O(e)} - ${O(s)}`,time:`${F(e)} - ${F(s)}`}})(o.startDate,o.endDate);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(i,{to:"/events",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[s.jsx(x,{size:20}),"Events"]})}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("button",{className:"inline-flex items-center gap-2 text-slate-600 hover:text-orange-600 font-medium transition-colors",children:[s.jsx(h,{size:16}),"Share Event"]})})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mb-8",children:s.jsxs("div",{className:"relative h-64 md:h-80",children:[s.jsx("img",{src:o.image,alt:o.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),s.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[M?s.jsx("span",{className:"bg-slate-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Past Event"}):s.jsx("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Upcoming"}),B&&!M&&s.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Full"}),L&&s.jsx("span",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"Your Event"})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:o.name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(c,{size:16}),Y.date]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{size:16}),Y.time]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(p,{size:16}),o.numAttendees,"/",o.capacity," ","attending"]}),s.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full text-xs",children:o.type})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:I?L?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"bg-green-100 text-green-800 px-3 py-2 rounded-lg flex items-center gap-2",children:[s.jsx(p,{size:16}),s.jsx("span",{className:"font-medium",children:"You're the organizer"})]}),!M&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>{const e=`/groups/${o.groupId}/events/${o.id}/edit`;o.groupId&&o.id?L?setTimeout(()=>{D(e)},100):alert("Error: You are not authorized to edit this event."):alert("Error: Missing event or group information. Please refresh the page and try again.")},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(v,{size:16}),"Edit"]}),s.jsxs("button",{onClick:()=>{$(s.jsx(z,{eventDetails:{id:o.id,name:o.name,groupId:o.groupId,image:o.image,startDate:o.startDate,description:o.description}}))},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(m,{size:16}),"Delete"]})]})]}):T?s.jsxs(a,{method:"post",children:[s.jsx("input",{type:"hidden",name:"intent",value:"leave-event"}),s.jsx("input",{type:"hidden",name:"id",value:o.id}),s.jsx("input",{type:"hidden",name:"userId",value:I.id}),s.jsx("input",{type:"hidden",name:"attendeeId",value:I.id}),s.jsxs("button",{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",disabled:M,children:[s.jsx(g,{size:18}),M?"Event Ended":"Leave Event"]})]}):s.jsxs(a,{method:"post",children:[s.jsx("input",{type:"hidden",name:"intent",value:"attend-event"}),s.jsx("input",{type:"hidden",name:"id",value:o.id}),s.jsx("input",{type:"hidden",name:"userId",value:I.id}),s.jsxs("button",{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",disabled:M||B,children:[s.jsx(j,{size:18}),M?"Event Ended":B?"Event Full":"Attend Event"]})]}):s.jsxs("button",{onClick:()=>{D("/signup",{state:{from:`/events/${o.id}`,eventId:o.id}})},className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",disabled:M||B,children:[s.jsx(j,{size:18}),M?"Event Ended":B?"Event Full":"Attend Event"]})})]})})]})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-1",children:s.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Overview",icon:c},{id:"attendees",label:"Attendees",icon:p},{id:"group",label:"Group",icon:b},{id:"photos",label:"Photos",icon:f}].map(({id:e,label:t,icon:a})=>s.jsxs("button",{onClick:()=>C(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors "+(A===e?"bg-orange-100 text-orange-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-50"),children:[s.jsx(a,{size:18}),t]},e))})}),"overview"===A&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"About This Event"}),s.jsx("p",{className:"text-slate-700 leading-relaxed",children:o.description})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Event Details"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(c,{size:20,className:"text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Date"}),s.jsx("p",{className:"text-slate-600",children:Y.date})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(u,{size:20,className:"text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Time"}),s.jsx("p",{className:"text-slate-600",children:Y.time})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(p,{size:20,className:"text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Capacity"}),s.jsxs("p",{className:"text-slate-600",children:[o.numAttendees,"/",o.capacity," ","people"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:["online"===o.type?s.jsx(N,{size:20,className:"text-orange-500"}):s.jsx(b,{size:20,className:"text-orange-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Location"}),s.jsx("p",{className:"text-slate-600",children:E(o.venueInfo,o.type).display}),"in-person"===o.type&&!(null==(r=o.venueInfo)?void 0:r.address)&&s.jsx("p",{className:"text-orange-600 text-sm mt-1",children:"Venue details will be shared closer to the event date"})]})]})]})]})]}),o.organizer&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Event Organizer"}),s.jsxs(i,{to:`/users/${o.organizer.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx("img",{src:o.organizer.profileImage,alt:o.organizer.username,className:"w-16 h-16 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-slate-900",children:[o.organizer.firstName," ",o.organizer.lastName]}),s.jsxs("p",{className:"text-slate-600 text-sm",children:["@",o.organizer.username]}),o.organizer.bio&&s.jsx("p",{className:"text-slate-700 text-sm mt-1 line-clamp-2",children:o.organizer.bio})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Event Stats"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Attending"}),s.jsx("span",{className:"font-semibold text-slate-900",children:o.numAttendees})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Capacity"}),s.jsx("span",{className:"font-semibold text-slate-900",children:o.capacity})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Available"}),s.jsx("span",{className:"font-semibold text-slate-900",children:o.capacity-o.numAttendees})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Type"}),s.jsx("span",{className:"font-semibold text-slate-900",children:o.type})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Location"}),s.jsxs("div",{className:"flex items-start gap-3",children:["online"===o.type?s.jsx(N,{size:20,className:"text-orange-500 mt-0.5"}):s.jsx(y,{size:20,className:"text-orange-500 mt-0.5"}),s.jsx("div",{className:"flex-1",children:(()=>{var e,t,a;const l=E(o.venueInfo,o.type);return"online"===o.type?s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Online Event"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Join from anywhere with an internet connection"}),s.jsx("div",{className:"mt-2 p-2 bg-blue-50 rounded-lg",children:s.jsx("p",{className:"text-blue-700 text-sm",children:"Event link will be shared with attendees before the event"})})]}):(null==(e=o.venueInfo)?void 0:e.address)||(null==(t=o.venueInfo)?void 0:t.city)?s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:l.address}),s.jsxs("p",{className:"text-slate-600",children:[l.city,l.state&&`, ${l.state}`]}),(!(null==(a=o.venueInfo)?void 0:a.address)||"Address TBD"===o.venueInfo.address)&&s.jsx("div",{className:"mt-2 p-2 bg-amber-50 rounded-lg",children:s.jsx("p",{className:"text-amber-700 text-sm",children:"Exact address will be provided closer to the event"})})]}):s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900",children:"Venue Coming Soon"}),s.jsx("p",{className:"text-slate-600 text-sm",children:"Location details will be announced"}),s.jsx("div",{className:"mt-2 p-2 bg-orange-50 rounded-lg",children:s.jsx("p",{className:"text-orange-700 text-sm",children:"Check back soon for venue information"})})]})})()})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Share This Event"}),s.jsxs("button",{className:"w-full flex items-center justify-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors",children:[s.jsx(h,{size:16}),"Share Event"]})]})]})]})]}),S&&s.jsx(V,{})]})};export{D as default};
