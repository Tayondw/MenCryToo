import{j as e}from"./index-kOaLMnvm.js";import{r as t}from"./react-vendor-DWDxyCYt.js";import{e as s,u as a,d as r,f as l,L as n,F as i}from"./router-vendor-DJrAx8OX.js";import{a as d}from"./redux-vendor-s9F9CGgp.js";import{l as o,C as c,t as m,c as x,u,o as h,Y as p,n as g,y as j}from"./ui-vendor-LOG_mfyu.js";const b=()=>{const b=s(),v=d(e=>e.session.user),f=a(),N=r(),y=l(),[w,D]=t.useState({name:"",description:"",type:"",capacity:"",startDate:"",endDate:""}),[k,C]=t.useState(null),[S,z]=t.useState(null),[E,F]=t.useState(!1),$="submitting"===N.state,I=150;t.useEffect(()=>{v||f("/")},[v,f]),t.useEffect(()=>{v&&(null==y?void 0:y.organizerId)!==v.id&&f("/")},[y,v,f]),t.useEffect(()=>{"idle"===N.state&&!b&&$&&(F(!0),setTimeout(()=>{const e=Date.now();window.location.href=`/events?created=${e}`},2e3))},[N.state,b,$]);const L=e=>{const{name:t,value:s}=e.target;D(e=>({...e,[t]:s}))},P=e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}T${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},G=w.name.length>=5&&w.name.length<=50&&w.description.length>=50&&w.description.length<=I&&""!==w.type&&parseInt(w.capacity)>=2&&parseInt(w.capacity)<=300&&""!==w.startDate&&""!==w.endDate&&null!==k,q=()=>e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{size:32,className:"text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:"Event Created Successfully!"}),e.jsxs("p",{className:"text-slate-600 mb-4",children:['Your event "',w.name,"\" has been created and you've been automatically added as an attendee."]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-green-800 text-sm",children:"âœ… As the organizer, you are automatically attending this event"})}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Redirecting to events page..."})]})});return v&&y?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs(n,{to:`/groups/${y.id}`,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(o,{size:20}),"Back to Group"]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:y.image,alt:y.name,className:"w-full h-auto object-cover rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent flex items-end",children:e.jsxs("div",{className:"p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Create an Event"}),e.jsxs("p",{className:"text-slate-200",children:["For ",y.name]})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(c,{size:18,className:"text-orange-500"}),"Event Preview"]}),w.name||S?e.jsxs("div",{className:"space-y-4",children:[S&&e.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:S,alt:"Preview",className:"w-full h-48 object-cover"})}),w.name&&e.jsx("h4",{className:"font-semibold text-lg text-slate-800",children:w.name}),w.description&&e.jsx("p",{className:"text-slate-700 text-sm",children:w.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600",children:[w.startDate&&w.endDate&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:[new Date(w.startDate).toLocaleDateString()," ","- ",new Date(w.endDate).toLocaleDateString()]})]}),w.type&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{size:16,className:"text-orange-500"}),e.jsx("span",{children:"in-person"===w.type?"In Person":"Online"})]}),w.capacity&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:["Capacity: ",w.capacity]})]})]})]}):e.jsxs("div",{className:"text-center py-8 px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{size:24,className:"text-slate-400"})}),e.jsx("p",{className:"text-slate-500 mb-2",children:"Your event preview will appear here"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Fill out the form to see how your event will look"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(c,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Create an Event"}),e.jsxs("p",{className:"text-slate-600",children:["For ",y.name]})]})]}),e.jsxs(i,{method:"post",action:`/groups/${y.id}/events/new`,encType:"multipart/form-data",className:"space-y-6",children:[e.jsx("input",{type:"hidden",name:"group_id",value:y.id}),e.jsx("input",{type:"hidden",name:"intent",value:"create-event"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700",children:"Event Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:w.name,onChange:L,placeholder:"Give your event a clear, descriptive name",className:`w-full px-4 py-3 border ${(null==b?void 0:b.name)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,maxLength:50,required:!0,disabled:$}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==b?void 0:b.name)?e.jsx("p",{className:"text-red-600",children:b.name}):e.jsx("p",{className:"text-slate-500",children:w.name.length<5?"Please enter at least 5 characters":"Great! Your event name looks good"})}),e.jsxs("div",{className:""+(w.name.length>40?"text-orange-500":w.name.length>=5?"text-green-500":"text-slate-500"),children:[w.name.length,"/",50]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700",children:"Event Type"}),e.jsxs("select",{id:"type",name:"type",value:w.type,onChange:L,className:`w-full px-4 py-3 border ${(null==b?void 0:b.type)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0,disabled:$,children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"in-person",children:"In Person"}),e.jsx("option",{value:"online",children:"Online"})]}),(null==b?void 0:b.type)&&e.jsx("p",{className:"text-xs text-red-600",children:b.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-slate-700",children:"Capacity"}),e.jsx("input",{id:"capacity",name:"capacity",type:"number",min:"2",max:"300",value:w.capacity,onChange:L,placeholder:"How many people can attend?",className:`w-full px-4 py-3 border ${(null==b?void 0:b.capacity)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0,disabled:$}),(null==b?void 0:b.capacity)?e.jsx("p",{className:"text-xs text-red-600",children:b.capacity}):e.jsx("p",{className:"text-xs text-slate-500",children:"Minimum 2, maximum 300 attendees"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-md font-medium text-slate-800 flex items-center gap-2",children:[e.jsx(u,{size:16,className:"text-orange-500"}),"Event Schedule"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700",children:"Start Date & Time"}),e.jsx("input",{id:"startDate",name:"startDate",type:"datetime-local",value:P(w.startDate),onChange:L,className:`w-full px-4 py-3 border ${(null==b?void 0:b.startDate)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0,disabled:$}),(null==b?void 0:b.startDate)&&e.jsx("p",{className:"text-xs text-red-600",children:b.startDate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700",children:"End Date & Time"}),e.jsx("input",{id:"endDate",name:"endDate",type:"datetime-local",value:P(w.endDate),onChange:L,className:`w-full px-4 py-3 border ${(null==b?void 0:b.endDate)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0,disabled:$}),(null==b?void 0:b.endDate)&&e.jsx("p",{className:"text-xs text-red-600",children:b.endDate})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700",children:"Event Description"}),e.jsx("textarea",{id:"description",name:"description",value:w.description,onChange:L,placeholder:"Describe your event in detail. What can attendees expect?",rows:5,className:`w-full px-4 py-3 border ${(null==b?void 0:b.description)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors resize-none`,maxLength:I,required:!0,disabled:$}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==b?void 0:b.description)?e.jsx("p",{className:"text-red-600",children:b.description}):e.jsx("p",{className:"text-slate-500",children:w.description.length<50?"Please write at least 50 characters":"Great! Your description looks good"})}),e.jsxs("div",{className:""+(w.description.length>120?"text-orange-500":w.description.length>=50?"text-green-500":"text-slate-500"),children:[w.description.length,"/",I]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-slate-700",children:"Event Image"}),S?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:S,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border border-slate-300"}),e.jsx("button",{type:"button",onClick:()=>{z(null),C(null)},className:"absolute top-2 right-2 bg-white/80 backdrop-blur-sm p-1 rounded-full hover:bg-white transition-colors",disabled:$,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-700",children:[e.jsx("path",{d:"M18 6L6 18"}),e.jsx("path",{d:"M6 6l12 12"})]})})]})}):e.jsxs("div",{onClick:()=>{var e;return!$&&(null==(e=document.getElementById("image-upload"))?void 0:e.click())},className:"border-2 border-dashed border-slate-300 rounded-lg p-8 text-center cursor-pointer hover:border-orange-300 hover:bg-orange-50 transition-all duration-200 "+($?"opacity-50 cursor-not-allowed":""),children:[e.jsx(h,{size:32,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Click to upload an image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, or GIF (max 5MB)"})]}),e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){C(s);const e=new FileReader;e.onload=e=>{var t;z(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},className:"hidden",required:!0,disabled:$}),(null==b?void 0:b.image)&&e.jsx("p",{className:"text-xs text-red-600",children:b.image})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{size:16,className:"text-orange-500"}),e.jsx("h4",{className:"font-medium text-slate-800",children:"Event Guidelines"})]}),e.jsxs("ul",{className:"text-sm text-slate-700 space-y-1 pl-6 list-disc",children:[e.jsx("li",{children:"Provide clear details about the event location and time"}),e.jsx("li",{children:"Set realistic capacity limits based on your venue"}),e.jsx("li",{children:"Include any special instructions or requirements for attendees"}),e.jsx("li",{children:"Consider accessibility needs for all participants"}),e.jsx("li",{className:"text-green-700 font-medium",children:"As the organizer, you'll be automatically added as an attendee"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx(n,{to:`/groups/${y.id}`,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200 text-center font-medium "+($?"opacity-50 pointer-events-none":""),children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!G||$,className:`px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 ${G&&!$?"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg":"bg-slate-300 text-slate-500 cursor-not-allowed"} transition-all duration-200`,children:$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating Event..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{size:18}),"Create Event"]})})]})]})]})]})}),E&&e.jsx(q,{})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Please Log In"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You need to be logged in to create an event."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(n,{to:"/login",className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200",children:"Log In"}),e.jsx(n,{to:"/",className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200",children:"Go Home"})]})]})})};export{b as default};
