import{j as e}from"./index-fkdTXUqh.js";import{r as t}from"./react-vendor-DWDxyCYt.js";import{A as s,X as r,a6 as a,K as n,I as o}from"./ui-vendor-LOG_mfyu.js";const l=({post:a,navigate:n,onClose:o})=>(t.useEffect(()=>{const e=()=>o();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[o]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-orange-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(s,{size:20,className:"text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Confirm Delete"})]}),e.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors",onClick:o,"aria-label":"Close modal",children:e.jsx(r,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Are you sure you want to delete this post?"}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"font-medium text-slate-800 mb-2",children:"Post Title:"}),e.jsxs("p",{className:"text-slate-700 italic",children:['"',a.title,'"']})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"This action cannot be undone and will permanently remove this post from your profile and the platform."})]})}),e.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[e.jsx("button",{className:"flex-1 px-4 py-3 border-2 border-slate-300 text-slate-700 rounded-lg hover:bg-slate-100 hover:border-slate-400 transition-all duration-200 font-medium",onClick:e=>{e.preventDefault(),o()},children:"Cancel"}),e.jsx("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("intent","delete-post"),e.append("postId",a.id.toString());if(!(await fetch(`/api/posts/${a.id}/delete`,{method:"DELETE",body:e})).ok)throw new Error("Failed to delete post");o(),n("/profile")}catch(t){}},className:"flex-1",children:e.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Delete Post"})})]})]})),i=({navigate:s,post:r})=>{const[i,d]=t.useState(!1),[c,u]=t.useState(!1),m=t.useRef(null),x=t.useCallback(e=>{e.stopPropagation(),d(e=>!e)},[]),b=t.useCallback(()=>{d(!1)},[]),p=t.useCallback(e=>{e.stopPropagation(),b(),s(`/posts/${r.id}/edit`)},[s,r.id,b]),f=t.useCallback(e=>{e.stopPropagation(),b(),u(!0)},[b]),h=t.useCallback(()=>{u(!1)},[]),g=t.useCallback(e=>{e.target===e.currentTarget&&h()},[h]);return t.useEffect(()=>{if(!c)return;const e=e=>{"Escape"===e.key&&h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[c,h]),t.useEffect(()=>{if(!i)return;const e=e=>{m.current&&!m.current.contains(e.target)&&b()},t=e=>{"Escape"===e.key&&b()};return document.addEventListener("click",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",t)}},[i,b]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:m,children:[e.jsx("button",{className:"bg-transparent border-none text-gray-600 cursor-pointer p-2 rounded-xl transition-all duration-200 ease-in-out flex items-center justify-center w-10 h-10 flex-shrink-0 hover:bg-gray-200 hover:text-orange-500 hover:scale-105 focus:outline-2 focus:outline-orange-500 focus:outline-offset-2",onClick:x,"aria-label":"Post options","aria-expanded":i,children:e.jsx(a,{size:20})}),i&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-40 bg-white border border-gray-200 rounded-xl shadow-lg z-[1000] min-w-[160px] overflow-hidden animate-in fade-in-0 slide-in-from-top-2 duration-200",children:[e.jsxs("button",{className:"flex items-center gap-4 w-full px-6 py-4 border-none bg-transparent cursor-pointer text-sm font-semibold transition-all duration-200 ease-in-out text-left border-b border-gray-200 last:border-b-0 focus:outline-none text-blue-600 hover:bg-blue-50 hover:text-blue-700 hover:translate-x-0.5",onClick:p,"aria-label":"Edit post",children:[e.jsx(n,{size:16,className:"flex-shrink-0"}),e.jsx("span",{children:"Edit Post"})]}),e.jsxs("button",{className:"flex items-center gap-4 w-full px-6 py-4 border-none bg-transparent cursor-pointer text-sm font-semibold transition-all duration-200 ease-in-out text-left border-b border-gray-200 last:border-b-0 focus:outline-none text-red-500 hover:bg-red-50 hover:text-red-700 hover:translate-x-0.5",onClick:f,"aria-label":"Delete post",children:[e.jsx(o,{size:16,className:"flex-shrink-0"}),e.jsx("span",{children:"Delete Post"})]})]})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[10000] p-6 animate-in fade-in-0 duration-200",onClick:g,children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:e.jsx(l,{post:r,navigate:s,onClose:h})})})]})};export{i as P};
