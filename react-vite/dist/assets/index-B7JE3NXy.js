import{j as e}from"./index-D9VjzoVj.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{F as t,b as a,d as r,e as l,u as n,L as i}from"./router-vendor-DFbjbkyO.js";import{R as o,X as d,a0 as c,I as m,J as x,l as h,w as u,m as g,C as p,c as f,s as b,a1 as j,Q as v,a2 as y,t as N,y as w,a3 as k,a as C,U as T,a4 as S,S as A,v as z,z as E,a5 as I}from"./ui-vendor-BYqGaI5u.js";import{u as L,a as D,P as M,b as P}from"./useLikes-BeK_54-P.js";import{u as Z,C as R}from"./useComments-l_QMb7xO.js";import"./redux-vendor-s9F9CGgp.js";const O=({post:t,navigate:a,onClose:r})=>(s.useEffect(()=>{const e=()=>r();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[r]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-orange-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(o,{size:20,className:"text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Confirm Delete"})]}),e.jsx("button",{className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors",onClick:r,"aria-label":"Close modal",children:e.jsx(d,{size:20,className:"text-slate-500"})})]}),e.jsx("div",{className:"p-6 text-center",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Are you sure you want to delete this post?"}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"font-medium text-slate-800 mb-2",children:"Post Title:"}),e.jsxs("p",{className:"text-slate-700 italic",children:['"',t.title,'"']})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"This action cannot be undone and will permanently remove this post from your profile and the platform."})]})}),e.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[e.jsx("button",{className:"flex-1 px-4 py-3 border-2 border-slate-300 text-slate-700 rounded-lg hover:bg-slate-100 hover:border-slate-400 transition-all duration-200 font-medium",onClick:e=>{e.preventDefault(),r()},children:"Cancel"}),e.jsx("form",{onSubmit:async e=>{e.preventDefault();try{const e=new FormData;e.append("intent","delete-post"),e.append("postId",t.id.toString());if(!(await fetch(`/api/posts/${t.id}/delete`,{method:"DELETE",body:e})).ok)throw new Error("Failed to delete post");r(),a("/profile")}catch(s){}},className:"flex-1",children:e.jsx("button",{type:"submit",className:"w-full px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Delete Post"})})]})]})),Y=({navigate:t,post:a})=>{const[r,l]=s.useState(!1),[n,i]=s.useState(!1),o=s.useRef(null),d=s.useCallback(e=>{e.stopPropagation(),l(e=>!e)},[]),h=s.useCallback(()=>{l(!1)},[]),u=s.useCallback(e=>{e.stopPropagation(),h(),t(`/posts/${a.id}/edit`)},[t,a.id,h]),g=s.useCallback(e=>{e.stopPropagation(),h(),i(!0)},[h]),p=s.useCallback(()=>{i(!1)},[]),f=s.useCallback(e=>{e.target===e.currentTarget&&p()},[p]);return s.useEffect(()=>{if(!n)return;const e=e=>{"Escape"===e.key&&p()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,p]),s.useEffect(()=>{if(!r)return;const e=e=>{o.current&&!o.current.contains(e.target)&&h()},s=e=>{"Escape"===e.key&&h()};return document.addEventListener("click",e),document.addEventListener("keydown",s),()=>{document.removeEventListener("click",e),document.removeEventListener("keydown",s)}},[r,h]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:o,children:[e.jsx("button",{className:"bg-transparent border-none text-gray-600 cursor-pointer p-2 rounded-xl transition-all duration-200 ease-in-out flex items-center justify-center w-10 h-10 flex-shrink-0 hover:bg-gray-200 hover:text-orange-500 hover:scale-105 focus:outline-2 focus:outline-orange-500 focus:outline-offset-2",onClick:d,"aria-label":"Post options","aria-expanded":r,children:e.jsx(c,{size:20})}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-40 bg-white border border-gray-200 rounded-xl shadow-lg z-[1000] min-w-[160px] overflow-hidden animate-in fade-in-0 slide-in-from-top-2 duration-200",children:[e.jsxs("button",{className:"flex items-center gap-4 w-full px-6 py-4 border-none bg-transparent cursor-pointer text-sm font-semibold transition-all duration-200 ease-in-out text-left border-b border-gray-200 last:border-b-0 focus:outline-none text-blue-600 hover:bg-blue-50 hover:text-blue-700 hover:translate-x-0.5",onClick:u,"aria-label":"Edit post",children:[e.jsx(m,{size:16,className:"flex-shrink-0"}),e.jsx("span",{children:"Edit Post"})]}),e.jsxs("button",{className:"flex items-center gap-4 w-full px-6 py-4 border-none bg-transparent cursor-pointer text-sm font-semibold transition-all duration-200 ease-in-out text-left border-b border-gray-200 last:border-b-0 focus:outline-none text-red-500 hover:bg-red-50 hover:text-red-700 hover:translate-x-0.5",onClick:g,"aria-label":"Delete post",children:[e.jsx(x,{size:16,className:"flex-shrink-0"}),e.jsx("span",{children:"Delete Post"})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[10000] p-6 animate-in fade-in-0 duration-200",onClick:f,children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",onClick:e=>e.stopPropagation(),children:e.jsx(O,{post:a,navigate:t,onClose:p})})})]})},F=({user:a,onClose:r,onConfirm:l})=>{s.useEffect(()=>{const e=()=>r();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[r]);return e.jsxs("div",{className:"delete-profile-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title",children:[e.jsx(h,{size:24}),"Confirm Account Deletion"]}),e.jsx("button",{className:"modal-close-btn",onClick:r,"aria-label":"Close modal",children:e.jsx(d,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"warning-icon",children:e.jsx(o,{size:64,color:"#dc2626"})}),e.jsx("h3",{className:"modal-message",children:"Are you sure you want to permanently delete your account?"}),e.jsxs("div",{className:"modal-warning",children:[e.jsxs("div",{className:"modal-warning-title",children:[e.jsx(o,{size:16}),"This action cannot be undone"]}),e.jsx("p",{children:"Deleting your account will permanently remove:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Your profile and all personal information"}),e.jsx("li",{children:"All posts, comments, and interactions"}),e.jsx("li",{children:"Any groups you created (members will be notified)"}),e.jsx("li",{children:"Events you organized (attendees will be notified)"}),e.jsx("li",{children:"Your connections and network within the platform"})]}),e.jsxs("div",{className:"modal-final-warning",children:[e.jsx("strong",{children:"Important:"})," Please inform group members and event attendees before proceeding!"]})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"cancel-button",onClick:e=>{e.preventDefault(),r()},children:"Cancel"}),e.jsxs(t,{method:"post",onSubmit:async()=>{l()},style:{display:"inline"},children:[e.jsx("input",{type:"hidden",name:"intent",value:"delete-profile"}),e.jsx("input",{type:"hidden",name:"userId",value:a.id.toString()}),e.jsx("button",{type:"submit",className:"delete-confirm-button",children:"Delete Account"})]})]})]})},$=({user:l,onClose:n})=>{var i;const[o,c]=s.useState([]),[m,x]=s.useState(!1),h=a(),p=r(),f=(null==(i=l.usersTags)?void 0:i.map(e=>e.name))||[],b=["ANGER","ANXIETY","DEPRESSION","SUBSTANCE ABUSE","STRESS","TRAUMA","RELATIONSHIPS","GRIEF","COMING OUT","SUICIDAL THOUGHTS"].filter(e=>!f.includes(e)),j="submitting"===h.state;s.useEffect(()=>{j&&x(!0)},[j]),s.useEffect(()=>{const e=()=>n();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[n]),s.useEffect(()=>{if(m&&"idle"===h.state&&!(null==p?void 0:p.error)){const e=setTimeout(()=>{n()},100);return()=>clearTimeout(e)}},[m,h.state,p,n]);const v=e=>{c(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return e.jsxs("div",{className:"add-tags-modal",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h2",{className:"modal-title",children:[e.jsx(u,{size:24}),"Add New Tags"]}),e.jsx("button",{className:"modal-close-btn",onClick:n,"aria-label":"Close modal",children:e.jsx(d,{size:20})})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"tags-intro",children:e.jsx("p",{className:"modal-message",children:"Select additional tags that resonate with you. These help connect you with similar users."})}),(null==p?void 0:p.error)&&e.jsx("div",{className:"error-message",style:{background:"#fee2e2",border:"1px solid #fca5a5",color:"#dc2626",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",textAlign:"center"},children:p.error}),b.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"available-tags-section",children:[e.jsx("h3",{className:"section-title",children:"Available Tags"}),e.jsx("div",{className:"tags-grid",children:b.map(s=>e.jsxs("label",{className:"tag-checkbox",children:[e.jsx("input",{type:"checkbox",checked:o.includes(s),onChange:()=>v(s)}),e.jsx("span",{className:"checkmark",children:o.includes(s)&&e.jsx(g,{size:12})}),e.jsx("span",{className:"tag-label",children:s})]},s))})]}),o.length>0&&e.jsxs("div",{className:"selected-tags-preview",children:[e.jsxs("h4",{className:"preview-title",children:["Selected Tags (",o.length,")"]}),e.jsx("div",{className:"selected-tags-list",children:o.map(s=>e.jsxs("span",{className:"selected-tag",children:[s,e.jsx("button",{type:"button",onClick:()=>v(s),className:"remove-tag-btn","aria-label":`Remove ${s}`,children:e.jsx(d,{size:14})})]},s))})]})]}):e.jsxs("div",{className:"no-tags-available",children:[e.jsx("div",{className:"success-icon",children:e.jsx(g,{size:48,color:"#10b981"})}),e.jsx("h3",{className:"success-title",children:"All Tags Added!"}),e.jsx("p",{className:"success-message",children:"You've already added all available tags to your profile. Great job building your interests!"})]}),f.length>0&&e.jsxs("div",{className:"current-tags-section",children:[e.jsx("h4",{className:"current-tags-title",children:"Your Current Tags"}),e.jsx("div",{className:"current-tags-list",children:f.map(s=>e.jsx("span",{className:"current-tag",children:s},s))})]})]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{className:"cancel-button",onClick:e=>{e.preventDefault(),n()},disabled:j,children:"Cancel"}),b.length>0&&e.jsxs(t,{method:"post",action:"/profile",style:{display:"inline"},children:[e.jsx("input",{type:"hidden",name:"intent",value:"add-tags"}),e.jsx("input",{type:"hidden",name:"userId",value:l.id.toString()}),o.map(s=>e.jsx("input",{type:"hidden",name:"userTags",value:s},s)),e.jsx("button",{type:"submit",className:"add-tags-confirm-button",disabled:0===o.length||j,children:j?"Adding...":`Add ${o.length} Tag${1!==o.length?"s":""}`})]})]})]})},G={id:1,username:"johndoe",firstName:"John",lastName:"Doe",email:"john.doe@example.com",hashedPassword:"mock_hashed_password_123",bio:"Passionate developer and community builder focused on mental health advocacy and creating supportive environments for men to express their emotions.",profileImage:"https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&w=300&h=300&fit=crop",createdAt:"2024-01-01T08:00:00Z",updatedAt:"2024-01-20T15:30:00Z",usersTags:[{id:1,name:"ANXIETY"},{id:2,name:"DEPRESSION"},{id:3,name:"STRESS"},{id:4,name:"RELATIONSHIPS"}],posts:[{id:1,title:"My Journey with Mental Health",caption:"Just finished working on an amazing React project with some incredible features! It has been a transformative experience that helped me cope with my anxiety.",image:"https://images.pexels.com/photos/11035380/pexels-photo-11035380.jpeg?auto=compress&cs=tinysrgb&w=800",likes:42,creator:1,createdAt:"2024-01-15T10:30:00Z",updatedAt:"2024-01-15T10:30:00Z",user:{},comments:3},{id:2,title:"Finding Support in Community",caption:"Exploring the world of design systems and component libraries while dealing with depression. The creative process has been therapeutic.",image:"https://images.pexels.com/photos/196644/pexels-photo-196644.jpeg?auto=compress&cs=tinysrgb&w=800",likes:28,creator:1,createdAt:"2024-01-10T14:20:00Z",updatedAt:"2024-01-10T14:20:00Z",user:{},comments:1},{id:3,title:"Breaking the Silence",caption:"Learning to express my emotions and break free from toxic masculinity. It is okay for men to cry and seek help.",image:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=800",likes:67,creator:1,createdAt:"2024-01-05T16:45:00Z",updatedAt:"2024-01-05T16:45:00Z",user:{},comments:5}],group:[{id:1,name:"Men's Mental Health Support",about:"A safe space for men to discuss mental health challenges and support each other",image:"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400",city:"San Francisco",state:"CA",numMembers:1250,type:"Support Group",organizerId:1,events:[]},{id:2,name:"Anxiety Support Circle",about:"Supporting each other through anxiety and panic disorders",image:"https://images.pexels.com/photos/3184360/pexels-photo-3184360.jpeg?auto=compress&cs=tinysrgb&w=400",city:"Oakland",state:"CA",numMembers:850,type:"Support Group",organizerId:1,events:[]}],events:[{id:1,name:"Mental Health Awareness Conference 2024",description:"Annual conference focused on men's mental health awareness and breaking stigma",image:"https://images.pexels.com/photos/1181676/pexels-photo-1181676.jpeg?auto=compress&cs=tinysrgb&w=400",numAttendees:150,capacity:200,type:"Conference",startDate:"2024-03-15T09:00:00Z",endDate:"2024-03-15T18:00:00Z",venueInfo:{id:4,groupId:1,address:"1000 Conference Center Dr",city:"San Francisco",state:"CA",latitude:37.7849,longitude:-122.4194},groupInfo:{}},{id:2,name:"Stress Management Workshop",description:"Interactive workshop on managing stress in daily life and work environments",image:"https://images.pexels.com/photos/3184340/pexels-photo-3184340.jpeg?auto=compress&cs=tinysrgb&w=400",numAttendees:45,capacity:50,type:"Workshop",startDate:"2024-02-28T14:00:00Z",endDate:"2024-02-28T17:00:00Z",venueInfo:{id:5,groupId:2,address:"555 Workshop Way",city:"Oakland",state:"CA",latitude:37.8144,longitude:-122.2811},groupInfo:{}}],userComments:[{id:1,comment:"Thank you for sharing your story, it really helped me!",userId:2,postId:1,createdAt:"2024-01-16T09:15:00Z",updatedAt:"2024-01-16T09:15:00Z"},{id:2,comment:"Your post about anxiety management was incredibly helpful.",userId:3,postId:1,createdAt:"2024-01-16T14:30:00Z",updatedAt:"2024-01-16T14:30:00Z"},{id:3,comment:"I appreciate your vulnerability and openness about mental health.",userId:4,postId:3,createdAt:"2024-01-06T10:20:00Z",updatedAt:"2024-01-06T10:20:00Z"},{id:4,comment:"Looking forward to the next group session!",userId:5,createdAt:"2024-01-18T16:45:00Z",updatedAt:"2024-01-18T16:45:00Z"}]},U=()=>{var t;const a=l(),r=n(),o=(null==a?void 0:a.user)||G,[d,c]=s.useState("posts"),[m,h]=s.useState("tags"),[g,O]=s.useState(!1),[U,H]=s.useState(!1),[J,B]=s.useState("grid"),[W,_]=s.useState(""),[Q,X]=s.useState(new Map),{likeStates:q,setLikeState:K,fetchLikeStatus:V}=L(),{isOpen:ee,postId:se,openModal:te,closeModal:ae}=D(),{modal:re,openModal:le,closeModal:ne}=Z({forceRefreshOnClose:!0,refreshDelay:100}),ie=s.useMemo(()=>(null==o?void 0:o.usersTags)??[],[o]),oe=s.useMemo(()=>(null==o?void 0:o.posts)??[],[o]),de=s.useMemo(()=>(null==o?void 0:o.group)??[],[o]),ce=s.useMemo(()=>(null==o?void 0:o.events)??[],[o]),me=s.useMemo(()=>[...oe].sort((e,s)=>new Date(s.updatedAt).getTime()-new Date(e.updatedAt).getTime()),[oe]);s.useEffect(()=>{oe.forEach(e=>{q.has(e.id)||(K(e.id,!1,e.likes),V(e.id))})},[oe,q,K,V]),s.useEffect(()=>{const e=new Map;oe.forEach(s=>{e.set(s.id,s.comments)}),X(e)},[oe]);const xe=s.useMemo(()=>{let e;switch(d){case"posts":e=me;break;case"groups":e=de;break;case"events":e=ce;break;default:e=[]}if(!W)return e;const s=W.toLowerCase();return"posts"===d?e.filter(e=>e.title.toLowerCase().includes(s)||e.caption.toLowerCase().includes(s)):"groups"===d?e.filter(e=>e.name.toLowerCase().includes(s)||e.about.toLowerCase().includes(s)):"events"===d?e.filter(e=>e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)):e},[d,W,me,de,ce]),he=s.useCallback(e=>{const s=new Date,t=new Date(e);return`${Math.floor((s.getTime()-t.getTime())/864e5)}d ago`},[]),ue=s.useCallback(async(e,s,t)=>{K(e,s,t)},[K]),ge=s.useCallback(e=>{oe.find(s=>s.id===e);const s=(e,s)=>{X(t=>{const a=new Map(t);return a.set(e,s),a})};le(e,[],s)},[oe,le]),pe=s.useCallback(e=>{te(e)},[te]),fe=s.useCallback(e=>{r(`/posts/${e}`)},[r]),be=s.useCallback(()=>{O(!0)},[]),je=s.useCallback(()=>{O(!1)},[]),ve=s.useCallback(()=>{O(!1)},[]),ye=s.useCallback(()=>{H(!0)},[]),Ne=s.useCallback(()=>{H(!1)},[]),we=()=>oe.reduce((e,s)=>e+(s.likes||0),0),ke=s.useCallback(()=>{const s=xe;switch(d){case"posts":return oe.length>0?e.jsx("div",{className:""+("grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-6 w-full":"space-y-6"),children:s.map(s=>{const t=q.get(s.id)||{isLiked:!1,likeCount:s.likes,isLoading:!1},a=Q.get(s.id)??s.comments;return e.jsxs("article",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 group flex flex-col",style:{minHeight:"500px"},children:[e.jsx("div",{className:"p-4 border-b border-gray-50 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("img",{src:null==o?void 0:o.profileImage,alt:null==o?void 0:o.username,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-100 flex-shrink-0"}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx("span",{className:"font-semibold text-gray-800 block truncate",children:null==o?void 0:o.username})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Y,{post:s,navigate:r})})]})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-50 flex-shrink-0",children:e.jsx("h3",{className:"font-semibold text-gray-800 text-sm tracking-wide leading-tight break-words cursor-pointer hover:text-orange-600 transition-colors",onClick:()=>fe(s.id),children:s.title})}),s.image&&e.jsxs("div",{className:"relative flex-shrink-0 cursor-pointer",onClick:()=>fe(s.id),children:[e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-64 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-3",children:[e.jsx(M,{postId:s.id,initialLikeCount:t.likeCount,initialIsLiked:t.isLiked,onLikeToggle:ue,onLikesClick:()=>pe(s.id),size:18,disabled:t.isLoading}),e.jsxs("button",{onClick:()=>ge(s.id),className:"flex items-center gap-2 text-gray-600 hover:text-blue-500 transition-colors duration-200",children:[e.jsx(j,{size:18}),e.jsx("span",{className:"text-sm font-medium",children:a})]}),e.jsx("button",{className:"flex items-center gap-2 text-gray-600 hover:text-green-500 transition-colors duration-200 ml-auto",children:e.jsx(v,{size:16})}),e.jsx("button",{className:"flex items-center gap-2 text-gray-600 hover:text-yellow-500 transition-colors duration-200",children:e.jsx(y,{size:16})})]}),e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed flex-1",children:e.jsxs("div",{className:"flex items-start gap-2 flex-wrap",children:[e.jsx("span",{className:"font-semibold text-gray-800 flex-shrink-0",children:null==o?void 0:o.username}),e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1 flex-shrink-0 self-center",children:[e.jsx(N,{size:12}),he(s.updatedAt)]}),e.jsx("span",{className:"break-words",children:s.caption})]})})]})]},s.id)})}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(w,{className:"text-white",size:24})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Posts Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Share your first post to get started!"}),e.jsxs(i,{to:"/posts/create",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200",children:[e.jsx(u,{size:16}),"Create Post"]})]})});case"groups":return de.length>0?e.jsx("div",{className:""+("grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6"),children:s.map(s=>e.jsx(i,{to:`/groups/${s.id}`,className:"group block",children:e.jsxs("article",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 h-full flex flex-col",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm text-xs font-medium text-gray-700 rounded-full",children:s.type})})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2 group-hover:text-orange-600 transition-colors duration-200",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-1 line-clamp-3",children:s.about}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{size:14}),e.jsxs("span",{children:[s.numMembers.toLocaleString()," members"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{size:14}),e.jsxs("span",{children:[s.city,", ",s.state]})]})]})]})]})},s.id))}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(f,{className:"text-white",size:24})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Groups Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Join groups to connect with like-minded people!"}),e.jsxs(i,{to:"/groups",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200",children:[e.jsx(f,{size:16}),"Explore Groups"]})]})});case"events":return ce.length>0?e.jsx("div",{className:""+("grid"===J?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6"),children:s.map(s=>e.jsx(i,{to:`/events/${s.id}`,className:"group block",children:e.jsxs("article",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg transition-all duration-300 h-full flex flex-col",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("span",{className:"px-3 py-1 bg-white/90 backdrop-blur-sm text-xs font-medium text-gray-700 rounded-full",children:s.type})})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2 group-hover:text-orange-600 transition-colors duration-200",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 flex-1 line-clamp-3",children:s.description}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{size:14}),e.jsx("span",{children:new Date(s.startDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{size:14}),e.jsxs("span",{children:[s.numAttendees,"/",s.capacity," attending"]})]}),s.venueInfo&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(b,{size:14}),e.jsxs("span",{children:[s.venueInfo.city,", ",s.venueInfo.state]})]})]})]})]})]})},s.id))}):e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"text-white",size:24})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No Events Yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create or join events to get started!"}),e.jsxs(i,{to:"/events",className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200",children:[e.jsx(p,{size:16}),"Explore Events"]})]})});default:return null}},[d,xe,J,o,oe,de,ce,he,r,q,ue,ge,pe,fe,Q]),Ce=s.useCallback(()=>{switch(m){case"tags":return ie.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(s=>e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-orange-100 to-slate-100 text-gray-700 text-sm font-medium rounded-full border border-gray-200 hover:shadow-sm transition-all duration-200",children:s.name},s.id))}),e.jsxs("button",{onClick:ye,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(u,{size:16}),"Add Tags"]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(T,{className:"text-gray-400",size:20})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"No tags added yet."})]}),e.jsxs("button",{onClick:ye,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(u,{size:16}),"Add Tags"]})]});case"similar":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-slate-600 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(k,{className:"text-white",size:20})}),e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Discover Similar Users"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Find users with similar interests based on your tags"})]}),e.jsx(i,{to:"/profile-feed",children:e.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(C,{size:16}),"Find Similar Users"]})})]});default:return null}},[m,ie,ye]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(i,{to:"/similar-feed",className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-all duration-200",children:"← Posts Feed"}),e.jsxs(i,{to:"/posts/create",className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-slate-600 text-white font-medium rounded-lg hover:from-orange-600 hover:to-slate-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[e.jsx(u,{size:16}),"Create Post"]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsxs("main",{className:"lg:col-span-3 space-y-8",children:[e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"relative h-32 bg-gradient-to-r from-orange-500 to-slate-600",children:e.jsx("div",{className:"absolute inset-0 bg-black/20"})}),e.jsx("div",{className:"relative px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:gap-6 -mt-16",children:[e.jsxs("div",{className:"relative justify-center self-center",children:[e.jsx("img",{src:null==o?void 0:o.profileImage,alt:null==o?void 0:o.username,className:"w-32 h-32 rounded-full object-cover border-4 border-white shadow-lg"}),e.jsx(i,{to:`/users/${null==o?void 0:o.id}/profile/update`,className:"absolute bottom-2 right-2 p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 border border-gray-200 group",children:e.jsx(S,{size:16,className:"text-gray-600 group-hover:text-orange-600 transition-colors"})})]}),e.jsxs("div",{className:"flex-1 mt-4 sm:mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"mt-16",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:null==o?void 0:o.username}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[null==o?void 0:o.firstName," ",null==o?void 0:o.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:null==o?void 0:o.email})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-4 sm:-mt-8",children:[e.jsxs(i,{to:`/users/${null==o?void 0:o.id}/profile/update`,className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-lg hover:bg-gray-200 transition-all duration-200",children:[e.jsx(A,{size:16}),"Edit Profile"]}),e.jsxs("button",{onClick:be,className:"flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 font-medium rounded-lg hover:bg-red-100 transition-all duration-200",children:[e.jsx(x,{size:16}),"Delete"]})]})]}),(null==o?void 0:o.bio)&&e.jsx("p",{className:"text-gray-700 mt-4 leading-relaxed",children:o.bio}),e.jsxs("div",{className:"flex items-center gap-8 mt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:oe.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Posts"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:we()}),e.jsx("div",{className:"text-sm text-gray-500",children:"Likes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:de.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Groups"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-800",children:ce.length}),e.jsx("div",{className:"text-sm text-gray-500",children:"Events"})]})]})]})]})})]}),e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1",children:["posts","groups","events"].map(s=>e.jsxs("button",{onClick:()=>c(s),className:"px-4 py-2 text-sm font-medium rounded-md transition-all duration-200 "+(d===s?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[s.charAt(0).toUpperCase()+s.slice(1)," (","posts"===s?oe.length:"groups"===s?de.length:ce.length,")"]},s))}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:`Search ${d}...`,value:W,onChange:e=>_(e.target.value),className:"pl-9 pr-4 py-2 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200"})]}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>B("grid"),className:"p-2 rounded-md transition-all duration-200 "+("grid"===J?"bg-white shadow-sm text-orange-600":"text-gray-500 hover:text-gray-700"),children:e.jsx(w,{size:16})}),e.jsx("button",{onClick:()=>B("list"),className:"p-2 rounded-md transition-all duration-200 "+("list"===J?"bg-white shadow-sm text-orange-600":"text-gray-500 hover:text-gray-700"),children:e.jsx(E,{size:16})})]})]})]}),W&&e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",xe.length,' results for "',W,'"']})]}),e.jsx("div",{className:"p-6",children:ke()})]})]}),e.jsxs("aside",{className:"space-y-6",children:[e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:[e.jsx("button",{onClick:()=>h("tags"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("tags"===m?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Your Tags"}),e.jsx("button",{onClick:()=>h("similar"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("similar"===m?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Similar"})]}),Ce()]}),e.jsxs("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(I,{size:16,className:"text-orange-500"}),"Quick Stats"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Posts"}),e.jsx("span",{className:"font-semibold text-gray-800",children:oe.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Likes"}),e.jsx("span",{className:"font-semibold text-gray-800",children:we()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Groups Joined"}),e.jsx("span",{className:"font-semibold text-gray-800",children:de.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Events Attending"}),e.jsx("span",{className:"font-semibold text-gray-800",children:ce.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Profile Tags"}),e.jsx("span",{className:"font-semibold text-gray-800",children:ie.length})]})]})]})]})]})}),e.jsxs("section",{className:"lg:hidden bg-white rounded-2xl shadow-sm border border-gray-100 p-6 max-w-7xl mx-auto mt-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:"Your Profile Tags"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Manage your interests and find similar users"})]}),e.jsxs("nav",{className:"flex items-center gap-1 bg-gray-100 rounded-lg p-1 mb-6",children:[e.jsx("button",{onClick:()=>h("tags"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("tags"===m?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Your Tags"}),e.jsx("button",{onClick:()=>h("similar"),className:"flex-1 px-3 py-2 text-xs font-medium rounded-md transition-all duration-200 "+("similar"===m?"bg-white text-orange-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:"Similar"})]}),Ce()]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(F,{user:o,onClose:je,onConfirm:ve})})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsx($,{user:o,onClose:Ne})})}),e.jsx(R,{isOpen:re.isOpen,onClose:ne,postId:re.postId||0,initialComments:re.comments,forceRefreshOnClose:!0,onCommentsChange:(e,s)=>{X(t=>{const a=new Map(t);return a.set(e,s),a})}}),ee&&se&&e.jsx(P,{isOpen:ee,onClose:ae,postId:se,initialCount:(null==(t=q.get(se))?void 0:t.likeCount)||0})]})};export{U as default};
