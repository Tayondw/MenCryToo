import{j as e}from"./index-BStRFqEB.js";import{r as s}from"./react-vendor-DWDxyCYt.js";import{e as t,d as a,u as l,L as r,F as i}from"./router-vendor-DFbjbkyO.js";import{a as n}from"./redux-vendor-s9F9CGgp.js";import{A as o,P as d,ae as c,e as x,ac as m,c as h,n as p,Y as u,$ as g}from"./ui-vendor-DzNpKoho.js";const j=()=>{const j=t(),f=a(),b=n(e=>e.session.user),v=l(),[N,w]=s.useState(""),[y,P]=s.useState(""),[k,z]=s.useState(null),[C,I]=s.useState(null),[F,U]=s.useState(!1),L=500;s.useEffect(()=>{b||v("/")},[b,v]),s.useEffect(()=>{b&&j&&(w(j.title||""),P(j.caption||""),I(j.image||null))},[j,b]);const S=N.length>=5&&N.length<=25&&y.length>=50&&y.length<=L;return b?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs(r,{to:"/profile",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(o,{size:20}),"Back to Profile"]})})})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:j.image,alt:j.title,className:"w-full h-auto object-cover rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent flex items-end",children:e.jsxs("div",{className:"p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Update Your Post"}),e.jsx("p",{className:"text-slate-200",children:"Refine your story and message"})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(d,{size:18,className:"text-orange-500"}),"Post Preview"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:b.profileImage,alt:b.username,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:b.username}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(c,{size:12}),e.jsx("span",{children:"Updated just now"})]})]})]}),e.jsx("h4",{className:"font-semibold text-lg text-slate-800",children:N||j.title||"Your post title will appear here"}),e.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:C||j.image,alt:"Preview",className:"w-full h-48 object-cover"})}),e.jsx("p",{className:"text-slate-700 text-sm",children:y||j.caption||"Your caption will appear here..."}),e.jsxs("div",{className:"flex items-center gap-4 text-slate-500 text-sm",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(x,{size:14}),j.likes||0]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{size:14}),"0"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{size:14}),"0"]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(d,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Update Post"}),e.jsx("p",{className:"text-slate-600",children:"Refine your message and content"})]})]}),e.jsxs(i,{method:"post",action:`/posts/${j.id}/edit`,encType:"multipart/form-data",className:"space-y-6",onSubmit:()=>{U(!0)},children:[e.jsx("input",{type:"hidden",name:"intent",value:"edit-post"}),e.jsx("input",{type:"hidden",name:"postId",value:j.id}),e.jsx("input",{type:"hidden",name:"userId",value:b.id}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700",children:"Post Title"}),e.jsx("input",{id:"title",name:"title",type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"What's your post about?",className:`w-full px-4 py-3 border ${(null==f?void 0:f.title)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,maxLength:25,required:!0}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==f?void 0:f.title)?e.jsx("p",{className:"text-red-600",children:f.title}):e.jsx("p",{className:"text-slate-500",children:"Choose a clear, descriptive title"})}),e.jsxs("div",{className:""+(N.length>20?"text-orange-500":"text-slate-500"),children:[N.length,"/",25]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"caption",className:"block text-sm font-medium text-slate-700",children:"Caption"}),e.jsx("textarea",{id:"caption",name:"caption",value:y,onChange:e=>P(e.target.value),placeholder:"Express yourself. What's on your mind?",rows:6,className:`w-full px-4 py-3 border ${(null==f?void 0:f.caption)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors resize-none`,maxLength:L,required:!0}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==f?void 0:f.caption)?e.jsx("p",{className:"text-red-600",children:f.caption}):e.jsx("p",{className:"text-slate-500",children:y.length<50?"Please write at least 50 characters":"Great! Your caption meets the minimum length"})}),e.jsxs("div",{className:""+(y.length>450?"text-orange-500":y.length>=50?"text-green-500":"text-slate-500"),children:[y.length,"/",L]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-slate-700",children:"Update Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-slate-300 flex-shrink-0",children:e.jsx("img",{src:C||j.image,alt:"Current",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:"Current Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload a new image to replace it"})]})]}),e.jsxs("div",{onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center cursor-pointer hover:border-orange-300 hover:bg-orange-50 transition-all duration-200",children:[e.jsx(p,{size:24,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Click to upload a new image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, or GIF (max 5MB)"})]}),e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",onChange:e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];if(t){z(t);const e=new FileReader;e.onload=e=>{var s;I(null==(s=e.target)?void 0:s.result)},e.readAsDataURL(t)}},className:"hidden"}),(null==f?void 0:f.image)&&e.jsx("p",{className:"text-red-600 text-xs",children:f.image})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{size:16,className:"text-orange-500"}),e.jsx("h4",{className:"font-medium text-slate-800",children:"Editing Tips"})]}),e.jsxs("ul",{className:"text-sm text-slate-700 space-y-1 pl-6 list-disc",children:[e.jsx("li",{children:"Keep your title clear and concise"}),e.jsx("li",{children:"Make sure your caption provides context for your image"}),e.jsx("li",{children:"Consider how your post might help or inspire others"}),e.jsx("li",{children:"Review for spelling and grammar before submitting"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx(r,{to:"/profile",className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200 text-center font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!S||F,className:`px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 ${S&&!F?"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg":"bg-slate-300 text-slate-500 cursor-not-allowed"} transition-all duration-200`,children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{size:18}),"Update Post"]})})]})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Please Log In"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You need to be logged in to update your post."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(r,{to:"/login",className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200",children:"Log In"}),e.jsx(r,{to:"/",className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200",children:"Go Home"})]})]})})};export{j as default};
