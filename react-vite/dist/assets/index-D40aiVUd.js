import{j as e}from"./index-D9VjzoVj.js";import{r as t}from"./react-vendor-DWDxyCYt.js";import{d as s,u as a,e as r,L as l,F as n}from"./router-vendor-DFbjbkyO.js";import{a as i}from"./redux-vendor-s9F9CGgp.js";import{A as d,C as o,s as c,c as m,t as x,n as p,Y as h,$ as u}from"./ui-vendor-BYqGaI5u.js";const g=()=>{const g=s(),j=i(e=>e.session.user),v=a(),b=r(),[f,N]=t.useState({name:"",description:"",type:"",capacity:"",startDate:"",endDate:""}),[y,w]=t.useState(null),[D,S]=t.useState(null),[k,$]=t.useState(!1),C=150;t.useEffect(()=>{j||v("/")},[j,v]),t.useEffect(()=>{var e;j&&(null==(e=null==b?void 0:b.organizer)?void 0:e.id)!==j.id&&v("/")},[b,j,v]),t.useEffect(()=>{var e;b&&(N({name:b.name||"",description:b.description||"",type:b.type||"",capacity:(null==(e=b.capacity)?void 0:e.toString())||"",startDate:b.startDate||"",endDate:b.endDate||""}),S(b.image))},[b]);const E=e=>{const{name:t,value:s}=e.target;N(e=>({...e,[t]:s}))},I=e=>{if(!e)return"";const t=new Date(e);if(isNaN(t.getTime()))return"";return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}T${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`},z=f.name.length>=5&&f.name.length<=50&&f.description.length>=50&&f.description.length<=C&&""!==f.type&&parseInt(f.capacity)>=2&&parseInt(f.capacity)<=300&&""!==f.startDate&&""!==f.endDate;return j&&b?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex items-center justify-between h-16",children:e.jsxs(l,{to:`/events/${b.id}`,className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[e.jsx(d,{size:20}),"Back to Event"]})})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:b.image,alt:b.name,className:"w-full h-auto object-cover rounded-2xl"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900/70 to-transparent flex items-end",children:e.jsxs("div",{className:"p-8 text-white",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Update Event"}),e.jsx("p",{className:"text-slate-200",children:b.name})]})})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(o,{size:18,className:"text-orange-500"}),"Event Preview"]}),e.jsxs("div",{className:"space-y-4",children:[D&&e.jsx("div",{className:"rounded-xl overflow-hidden border border-slate-200",children:e.jsx("img",{src:D,alt:"Preview",className:"w-full h-48 object-cover"})}),e.jsx("h4",{className:"font-semibold text-lg text-slate-800",children:f.name||b.name}),e.jsx("p",{className:"text-slate-700 text-sm",children:f.description||b.description}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:[new Date(f.startDate||b.startDate).toLocaleDateString()," ","-"," ",new Date(f.endDate||b.endDate).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-orange-500"}),e.jsx("span",{children:"in-person"===(f.type||b.type)?"In Person":"Online"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{size:16,className:"text-orange-500"}),e.jsxs("span",{children:["Capacity: ",f.capacity||b.capacity]})]})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx(o,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Update Event"}),e.jsx("p",{className:"text-slate-600",children:"Make changes to your event details"})]})]}),e.jsxs(n,{method:"post",action:`/groups/${b.groupId}/events/${b.id}`,encType:"multipart/form-data",className:"space-y-6",onSubmit:()=>{$(!0)},children:[e.jsx("input",{type:"hidden",name:"group_id",value:b.groupId}),e.jsx("input",{type:"hidden",name:"eventId",value:b.id}),e.jsx("input",{type:"hidden",name:"intent",value:"edit-event"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700",children:"Event Name"}),e.jsx("input",{id:"name",name:"name",type:"text",value:f.name,onChange:E,placeholder:"Give your event a clear, descriptive name",className:`w-full px-4 py-3 border ${(null==g?void 0:g.name)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,maxLength:50,required:!0}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==g?void 0:g.name)?e.jsx("p",{className:"text-red-600",children:g.name}):e.jsx("p",{className:"text-slate-500",children:f.name.length<5?"Please enter at least 5 characters":"Great! Your event name looks good"})}),e.jsxs("div",{className:""+(f.name.length>40?"text-orange-500":f.name.length>=5?"text-green-500":"text-slate-500"),children:[f.name.length,"/",50]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700",children:"Event Type"}),e.jsxs("select",{id:"type",name:"type",value:f.type,onChange:E,className:`w-full px-4 py-3 border ${(null==g?void 0:g.type)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0,children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"in-person",children:"In Person"}),e.jsx("option",{value:"online",children:"Online"})]}),(null==g?void 0:g.type)&&e.jsx("p",{className:"text-xs text-red-600",children:g.type})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-slate-700",children:"Capacity"}),e.jsx("input",{id:"capacity",name:"capacity",type:"number",min:"2",max:"300",value:f.capacity,onChange:E,placeholder:"How many people can attend?",className:`w-full px-4 py-3 border ${(null==g?void 0:g.capacity)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0}),(null==g?void 0:g.capacity)?e.jsx("p",{className:"text-xs text-red-600",children:g.capacity}):e.jsx("p",{className:"text-xs text-slate-500",children:"Minimum 2, maximum 300 attendees"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-md font-medium text-slate-800 flex items-center gap-2",children:[e.jsx(x,{size:16,className:"text-orange-500"}),"Event Schedule"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700",children:"Start Date & Time"}),e.jsx("input",{id:"startDate",name:"startDate",type:"datetime-local",value:I(f.startDate),onChange:E,className:`w-full px-4 py-3 border ${(null==g?void 0:g.startDate)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0}),(null==g?void 0:g.startDate)&&e.jsx("p",{className:"text-xs text-red-600",children:g.startDate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700",children:"End Date & Time"}),e.jsx("input",{id:"endDate",name:"endDate",type:"datetime-local",value:I(f.endDate),onChange:E,className:`w-full px-4 py-3 border ${(null==g?void 0:g.endDate)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors`,required:!0}),(null==g?void 0:g.endDate)&&e.jsx("p",{className:"text-xs text-red-600",children:g.endDate})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700",children:"Event Description"}),e.jsx("textarea",{id:"description",name:"description",value:f.description,onChange:E,placeholder:"Describe your event in detail. What can attendees expect?",rows:5,className:`w-full px-4 py-3 border ${(null==g?void 0:g.description)?"border-red-300":"border-slate-300"} rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-colors resize-none`,maxLength:C,required:!0}),e.jsxs("div",{className:"flex justify-between items-center text-xs",children:[e.jsx("div",{children:(null==g?void 0:g.description)?e.jsx("p",{className:"text-red-600",children:g.description}):e.jsx("p",{className:"text-slate-500",children:f.description.length<50?"Please write at least 50 characters":"Great! Your description looks good"})}),e.jsxs("div",{className:""+(f.description.length>120?"text-orange-500":f.description.length>=50?"text-green-500":"text-slate-500"),children:[f.description.length,"/",C]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"image",className:"block text-sm font-medium text-slate-700",children:"Event Image (Optional)"}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden border border-slate-300 flex-shrink-0",children:e.jsx("img",{src:D||b.image,alt:"Current",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-slate-700 font-medium",children:"Current Image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Upload a new image to replace it (optional)"})]})]}),e.jsxs("div",{onClick:()=>{var e;return null==(e=document.getElementById("image-upload"))?void 0:e.click()},className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center cursor-pointer hover:border-orange-300 hover:bg-orange-50 transition-all duration-200",children:[e.jsx(p,{size:24,className:"mx-auto text-slate-400 mb-2"}),e.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Click to upload a new image"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PNG, JPG, or GIF (max 5MB)"})]}),e.jsx("input",{id:"image-upload",name:"image",type:"file",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){w(s);const e=new FileReader;e.onload=e=>{var t;S(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(s)}},className:"hidden"}),(null==g?void 0:g.image)&&e.jsx("p",{className:"text-xs text-red-600",children:g.image})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(h,{size:16,className:"text-orange-500"}),e.jsx("h4",{className:"font-medium text-slate-800",children:"Event Guidelines"})]}),e.jsxs("ul",{className:"text-sm text-slate-700 space-y-1 pl-6 list-disc",children:[e.jsx("li",{children:"Provide clear details about the event location and time"}),e.jsx("li",{children:"Set realistic capacity limits based on your venue"}),e.jsx("li",{children:"Include any special instructions or requirements for attendees"}),e.jsx("li",{children:"Consider accessibility needs for all participants"})]})]}),e.jsxs("div",{className:"pt-4 border-t border-slate-200 flex flex-col sm:flex-row gap-4 justify-end",children:[e.jsx(l,{to:`/events/${b.id}`,className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200 text-center font-medium",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!z||k,className:`px-6 py-3 rounded-lg font-medium flex items-center justify-center gap-2 ${z&&!k?"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 shadow-md hover:shadow-lg":"bg-slate-300 text-slate-500 cursor-not-allowed"} transition-all duration-200`,children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{size:18}),"Update Event"]})})]})]})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Please Log In"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"You need to be logged in to update this event."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(l,{to:"/login",className:"px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-lg font-medium hover:from-orange-600 hover:to-orange-700 transition-all duration-200",children:"Log In"}),e.jsx(l,{to:"/",className:"px-6 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-all duration-200",children:"Go Home"})]})]})})};export{g as default};
