import{u as e,j as s}from"./index-D1HbfN_4.js";import{r as t}from"./react-vendor-DWDxyCYt.js";import{F as a,f as l,u as r,L as i}from"./router-vendor-DqRelNZw.js";import{a as n}from"./redux-vendor-s9F9CGgp.js";import{A as d,X as o,I as c,c as m,l as x,k as h,t as u,C as p,J as g,x as j,K as b,N as v,U as f,O as N,u as w,Q as y,R as z}from"./ui-vendor-LOG_mfyu.js";const I=({groupDetails:l})=>{const{closeModal:r}=e(),i=e=>{e.preventDefault(),r()};return t.useEffect(()=>{const e=()=>r();return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)},[r]),s.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-md w-full",children:[s.jsx("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 border-b border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:s.jsx(d,{size:20,className:"text-red-600"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Confirm Delete"})]}),s.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 transition-colors",children:s.jsx(o,{size:20,className:"text-slate-500"})})]})}),s.jsx("div",{className:"p-6 text-center",children:s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(c,{size:32,className:"text-red-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-3",children:"Are you sure you want to delete this group?"}),s.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:[s.jsx("p",{className:"font-medium text-slate-800 mb-2",children:"Group Name:"}),s.jsxs("p",{className:"text-slate-700 italic",children:['"',l.name,'"']})]}),s.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:"This action cannot be undone. This will permanently delete the group, all its events, and remove all members."})]})}),s.jsx("div",{className:"flex p-6 bg-slate-50 border-t border-slate-200",children:s.jsxs(a,{method:"delete",action:`/groups/${l.id}`,onSubmit:r,className:"w-full flex gap-3",children:[s.jsx("input",{type:"hidden",name:"intent",value:"delete-group"}),s.jsx("input",{type:"hidden",name:"groupId",value:l.id}),s.jsx("input",{type:"hidden",name:"id",value:l.id}),s.jsxs("button",{type:"button",onClick:i,className:"flex-1 px-4 py-3 border-2 border-slate-300 text-slate-700 rounded-lg hover:bg-slate-100 hover:border-slate-400 transition-all duration-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(o,{size:18}),"Cancel"]}),s.jsxs("button",{type:"submit",className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[s.jsx(c,{size:18}),"Delete Group"]})]})})]})},D=()=>{var d,o,D,C;const E=l(),k=r(),G=n(e=>e.session.user),[$,O]=t.useState("overview"),{setModalContent:M}=e();t.useEffect(()=>{(null==E?void 0:E.id)||k("/groups")},[E,k]);const T=t.useMemo(()=>{if(!E)return[];let e=E.members||[];if(!e.some(e=>e.userId===E.organizerId)&&E.organizer){e=[{id:`organizer_${E.organizerId}`,userId:E.organizerId,groupId:E.id,isOrganizer:!0,user:{id:E.organizer.id,firstName:E.organizer.firstName,lastName:E.organizer.lastName,username:E.organizer.username,email:E.organizer.email,profileImage:E.organizer.profileImage}},...e]}else e=e.map(e=>({...e,isOrganizer:e.userId===E.organizerId}));return e.sort((e,s)=>e.isOrganizer&&!s.isOrganizer?-1:!e.isOrganizer&&s.isOrganizer?1:e.user.firstName.localeCompare(s.user.firstName))},[E]),S=t.useMemo(()=>!(!G||!T.length)&&T.some(e=>e.userId===G.id),[G,T]),A=t.useMemo(()=>(null==G?void 0:G.id)===(null==E?void 0:E.organizerId),[G,E]),{upcomingEvents:L,pastEvents:U}=t.useMemo(()=>{if(!(null==E?void 0:E.events))return{upcomingEvents:[],pastEvents:[]};const e=new Date,s=E.events.filter(s=>new Date(s.startDate)>=e),t=E.events.filter(s=>new Date(s.startDate)<e);return s.sort((e,s)=>new Date(e.startDate).getTime()-new Date(s.startDate).getTime()),t.sort((e,s)=>new Date(s.startDate).getTime()-new Date(e.startDate).getTime()),{upcomingEvents:s,pastEvents:t}},[null==E?void 0:E.events]),J=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),P=()=>{k("/signup",{state:{from:`/groups/${E.id}`,groupId:E.id}})};return E?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100",children:[s.jsx("div",{className:"bg-white/80 backdrop-blur-sm border-b border-slate-200 sticky top-0 z-40",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(i,{to:"/groups",className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900 font-medium transition-colors",children:[s.jsx(x,{size:20}),"Groups"]})}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs(i,{to:"/groups/new",className:"inline-flex items-center gap-2 text-slate-600 hover:text-orange-600 font-medium transition-colors",children:["Create Another Group",s.jsx(h,{size:16})]})})]})})}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden mb-8",children:s.jsxs("div",{className:"relative h-64 md:h-80",children:[s.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:E.name}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{size:16}),E.city,", ",E.state]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(m,{size:16}),T.length," members"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(p,{size:16}),(null==(d=E.events)?void 0:d.length)||0," events"]}),s.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-2 py-1 rounded-full text-xs",children:E.type})]})]}),s.jsx("div",{className:"flex items-center gap-3",children:G?A?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>k(`/groups/${E.id}/events/new`),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(j,{size:16}),"Create Event"]}),s.jsxs("button",{onClick:()=>k(`/groups/${E.id}/edit`),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(b,{size:16}),"Edit"]}),s.jsxs("button",{onClick:()=>{M(s.jsx(I,{groupDetails:{id:E.id,name:E.name}}))},className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(c,{size:16}),"Delete"]})]}):S?s.jsxs(a,{method:"post",children:[s.jsx("input",{type:"hidden",name:"intent",value:"leave-group"}),s.jsx("input",{type:"hidden",name:"id",value:E.id}),s.jsx("input",{type:"hidden",name:"userId",value:G.id}),s.jsx("input",{type:"hidden",name:"memberId",value:G.id}),s.jsxs("button",{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[s.jsx(v,{size:18}),"Leave Group"]})]}):s.jsxs(a,{method:"post",children:[s.jsx("input",{type:"hidden",name:"intent",value:"join-group"}),s.jsx("input",{type:"hidden",name:"id",value:E.id}),s.jsx("input",{type:"hidden",name:"userId",value:G.id}),s.jsxs("button",{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[s.jsx(g,{size:18}),"Join Group"]})]}):s.jsxs("button",{onClick:P,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2",children:[s.jsx(g,{size:18}),"Join Group"]})})]})})]})}),s.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-1",children:s.jsx("div",{className:"flex space-x-1",children:[{id:"overview",label:"Overview",icon:f},{id:"events",label:"Events",icon:p},{id:"members",label:"Members",icon:m},{id:"photos",label:"Photos",icon:N}].map(({id:e,label:t,icon:a})=>s.jsxs("button",{onClick:()=>O(e),className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors "+($===e?"bg-orange-100 text-orange-700":"text-slate-600 hover:text-slate-900 hover:bg-slate-50"),children:[s.jsx(a,{size:18}),t]},e))})}),"overview"===$&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"About This Group"}),s.jsx("p",{className:"text-slate-700 leading-relaxed",children:E.about})]}),E.organizer&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Meet the Organizer"}),s.jsxs(i,{to:`/users/${E.organizer.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsx("img",{src:E.organizer.profileImage,alt:E.organizer.username,className:"w-16 h-16 rounded-full object-cover"}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-slate-900",children:[E.organizer.firstName," ",E.organizer.lastName]}),s.jsxs("p",{className:"text-slate-600 text-sm",children:["@",E.organizer.username]}),E.organizer.bio&&s.jsx("p",{className:"text-slate-700 text-sm mt-1 line-clamp-2",children:E.organizer.bio})]})]})]}),L.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Upcoming Events"}),s.jsx("button",{onClick:()=>O("events"),className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:"View All"})]}),s.jsx("div",{className:"space-y-4",children:L.slice(0,3).map(e=>s.jsxs(i,{to:`/events/${e.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100",children:[s.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:e.name}),s.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(w,{size:12}),J(e.startDate)]}),e.venueInfo&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{size:12}),e.venueInfo.city,","," ",e.venueInfo.state]})]})]})]},e.id))})]})]}),"events"===$&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Upcoming Events (",L.length,")"]}),0===L.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(p,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-600",children:"No upcoming events scheduled."}),A&&s.jsx("button",{onClick:()=>k(`/groups/${E.id}/events/new`),className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Create First Event"})]}):s.jsx("div",{className:"grid gap-4",children:L.map(e=>s.jsxs(i,{to:`/events/${e.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100",children:[s.jsx("img",{src:e.image,alt:e.name,className:"w-20 h-20 rounded-lg object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:e.name}),s.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(w,{size:14}),J(e.startDate)]}),e.venueInfo&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{size:14}),e.venueInfo.city,","," ",e.venueInfo.state]})]})]})]},e.id))})]}),U.length>0&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Past Events (",U.length,")"]}),s.jsx("div",{className:"grid gap-4",children:U.map(e=>s.jsxs(i,{to:`/events/${e.id}`,className:"flex items-center gap-4 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100 opacity-75",children:[s.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-lg object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:e.name}),s.jsx("p",{className:"text-slate-600 text-sm mb-2 line-clamp-1",children:e.description}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(w,{size:12}),J(e.startDate)]}),e.venueInfo&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(u,{size:12}),e.venueInfo.city,","," ",e.venueInfo.state]})]})]})]},e.id))})]})]}),"members"===$&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:["Members (",T.length,")"]}),G?0===T.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(m,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"No members yet. Be the first to join!"}),!S&&s.jsxs(a,{method:"post",children:[s.jsx("input",{type:"hidden",name:"intent",value:"join-group"}),s.jsx("input",{type:"hidden",name:"id",value:E.id}),s.jsx("input",{type:"hidden",name:"userId",value:G.id}),s.jsx("button",{type:"submit",className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Join This Group"})]})]}):s.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-4",children:T.map(e=>s.jsxs(i,{to:`/users/${e.userId}`,className:"flex items-center gap-3 p-4 rounded-lg hover:bg-slate-50 transition-colors border border-slate-100 relative",children:[e.isOrganizer&&s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(y,{size:16,className:"text-yellow-500 fill-current"})}),s.jsx("img",{src:e.user.profileImage,alt:e.user.username,className:"w-12 h-12 rounded-full object-cover"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h3",{className:"font-semibold text-slate-900",children:[e.user.firstName," ",e.user.lastName]}),e.isOrganizer&&s.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium",children:"Organizer"})]}),s.jsxs("p",{className:"text-slate-600 text-sm",children:["@",e.user.username]})]})]},`${e.userId}-${e.groupId}`))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(m,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"You must be logged in to view group members."}),s.jsx("button",{onClick:P,className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Sign Up to View Members"})]})]}),"photos"===$&&s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Group Photos"}),E.groupImage&&0!==(null==(o=E.groupImage)?void 0:o.length)?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:null==(D=E.groupImage)?void 0:D.map(e=>s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden hover:opacity-90 transition-opacity cursor-pointer",children:s.jsx("img",{src:e.groupImage,alt:e.name,className:"w-full h-full object-cover"})},e.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(N,{size:48,className:"mx-auto text-slate-300 mb-4"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"No photos uploaded yet."}),A&&s.jsx("button",{className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors",children:"Add Photos"})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Group Stats"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Members"}),s.jsx("span",{className:"font-semibold text-slate-900",children:T.length})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Events"}),s.jsx("span",{className:"font-semibold text-slate-900",children:(null==(C=E.events)?void 0:C.length)||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Upcoming"}),s.jsx("span",{className:"font-semibold text-slate-900",children:L.length})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-600",children:"Type"}),s.jsx("span",{className:"font-semibold text-slate-900",children:E.type})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Location"}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[s.jsx(u,{size:16}),s.jsxs("span",{children:[E.city,", ",E.state]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Share This Group"}),s.jsxs("button",{className:"w-full flex items-center justify-center gap-2 bg-slate-100 hover:bg-slate-200 text-slate-700 px-4 py-2 rounded-lg font-medium transition-colors",children:[s.jsx(z,{size:16}),"Share Group"]})]})]})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-orange-50 to-slate-100 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(m,{size:32,className:"text-slate-400"})}),s.jsx("p",{className:"text-slate-600",children:"Group not found."})]})})};export{D as default};
